import{aR as _e,u as d,d as Q,r as N,aC as Ge,ay as A,aF as Y,ax as ve,o as O,c as ne,w as h,a as p,aS as Nn,aT as Mn,aG as k,aH as G,aU as K,aI as j,aV as Rn,aA as Se,aW as Fn,aX as $n,aY as nn,aD as Ue,aZ as Ut,T as he,au as Gn,v as Pe,aK as Rt,a_ as Un,a5 as on,az as ut,a$ as jn,aP as an,aB as It,b0 as zn,b1 as vt,aE as kt,b2 as Wn,b3 as Vn,b4 as Bn,aj as Xn,b5 as Yn,I as Ln,U as ln,ar as Hn,V as qn,av as Zn,ag as Kn,P as rn,b6 as Qn,O as sn,b7 as Jn,aL as un,aM as cn,b8 as eo,aq as to,b9 as dn,ab as no,ac as oo,X as ao,ba as jt,bb as lo,Q as ro,S as io,M as so}from"./vendor-cf8652f6.js";import{_ as Ze,g as uo,r as fn,a as co,b as pn,c as mn,f as zt,t as fo,d as po,e as mo,h as Wt}from"./index-beccf756.js";class go{step=0;max=0;#e=[];constructor(e=100){this.max=e??100}get value(){return this.#e[this.step-1]}set value(e){this.push(_e(e))}undo(){return this.go(-1)}redo(){return this.go(1)}go(e){return e=this.step+e,e=Math.max(0,Math.min(e,this.max,this.#e.length)),this.step=e,this.#e[this.step-1]}empty(){this.step=0,this.#e=[]}push(e){this.#e.length=this.step,this.#e.length>=this.max?this.#e.shift():this.step+=1,this.#e.push(_e(e))}}const ho={cols:24,xGap:12,yGap:12},_o={size:"medium",labelPlacement:"left",labelAlign:"left",requireMarkPlacement:"right-hanging"},vo=[{value:"small",label:"较小"},{value:"medium",label:"中等"},{value:"large",label:"较大"}],bo=[{value:"left",label:"左置"},{value:"top",label:"上置"}],yo=[{value:"left",label:"左对齐"},{value:"right",label:"右对齐"}],wo=["px","em"],Eo=[{value:"left",label:"左侧"},{value:"right",label:"右侧"},{value:"right-hanging",label:"右侧悬挂"}],So=[{value:"/^[-]?\\d+(\\.\\d+)?$/",label:"数字"},{value:"/^[A-Za-z]+$/",label:"字母"},{value:"/^[A-Za-z0-9]+$/",label:"数字字母"},{value:"/^[1][0-9]{10}$/",label:"手机号码"},{value:"/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/",label:"邮箱"},{value:"/^https?://(([a-zA-Z0-9_-])+(.)?)*(:d+)?(/((.)?(?)?=?&?[a-zA-Z0-9_-](?)?)*)*$/i",label:"网址"},{value:"/^[^一-龥]+$/",label:"非中文字符"},{value:"/^[一-龥]+$/",label:"仅中文字符"}],Do={default(t){const{default:{options:e,space:o}}=t.__slot__,n=N("n-checkbox"),a=N("n-space");return A(a,o,()=>e.map(l=>A(n,l)))}},Co=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),To={default(t,e){const{default:o,preLabel:n,sufLabel:a}=t.__slot__,l=N("n-input"),r=N("n-input-group-label"),i=N("NIcon"),u={};Object.keys(o).forEach(f=>{const c=o[f];if(c){const g=N(c);u[f]=()=>A(i,{component:g})}});const s=[A(l,e,u)];return n&&s.unshift(A(r,()=>n)),a&&s.push(A(r,()=>a)),s}},Oo=Object.freeze(Object.defineProperty({__proto__:null,default:To},Symbol.toStringTag,{value:"Module"})),Je=(t,e)=>{const o=t.__slot__[e],n=N("NIcon"),a=N(o);return A(n,{component:a})},xo={prefix(t,e){return Je(t,e)},suffix(t,e){return Je(t,e)},"add-icon"(t,e){return Je(t,e)},"minu-icon"(t,e){return Je(t,e)}},Io=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),Vt=(t,e)=>{const o=N("NIcon"),n=N(t.__slot__[e]);return A(o,{component:n})},ko={prefix(t,e){return Vt(t,e)},suffix(t,e){return Vt(t,e)}},Po=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"})),Ao={default(t){const{default:{type:e,options:o,space:n}}=t.__slot__,a=e==="button",l=N(a?"n-radio-button":"n-radio"),r=N("n-space");return a?o.map(i=>A(l,i)):A(r,n,()=>o.map(i=>A(l,i)))}},No=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Mo={default(t,e){return t.__slot__[e]}},Ro=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),Fo={thumb(t,e){return t.__slot__[e]}},$o=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Go={checked(t,e){return t.__slot__[e]},unchecked(t,e){return t.__slot__[e]},icon(t,e){return t.__slot__[e]},"checked-icon"(t,e){return t.__slot__[e]},"unchecked-icon"(t,e){return t.__slot__[e]}},Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"}));function jo(t){const e=t.split("/").at(-1),o=t.split(e).at(0),[n,...a]=e.split(".").reverse();return{dir:o,base:e,ext:`.${n}`,name:a.reverse().join(".")}}function gn(t){return d(t).length?d(t).reduce((e,o)=>{const{__vModel__:n,__config__:a,label:l,__rules__:r}=o,i=[];return a.required&&i.push({required:!0,message:`${l}必须填写`,trigger:"blur"}),r!=null&&r.length&&r.forEach(u=>{u.pattern&&i.push({validator:(s,f)=>new RegExp(u.pattern.slice(1,-1)).test(f),message:u.message||`${l}错误`,trigger:"blur"})}),{...e,[n]:i}},{}):{}}const hn={},Bt=Object.assign({"./n-checkbox-group.ts":Co,"./n-input-group.ts":Oo,"./n-input-number.ts":Io,"./n-input.ts":Po,"./n-radio-group.ts":No,"./n-rate.ts":Ro,"./n-slider.ts":$o,"./n-switch.ts":Uo});Object.keys(Bt).forEach(t=>{const e=Bt[t].default||{},{name:o}=jo(t);hn[o]=e});function zo(t,e){const{tag:o,__slot__:n}=t,a=hn[o],l={};return o==="n-input-group"?()=>a.default(t,e):(a&&(a.default&&n.default&&(l.default=()=>a.default(t,e)),Object.keys(a).forEach(r=>{const i=a[r];n&&n[r]&&(l[r]=()=>i(t,r))})),l)}function Wo(t,e,{props:o,emit:n}){const{tagType:a,__config__:l}=e;return["Date","Time"].includes(a)&&l.valueFormat?(t["value-format"]=o.value,t["onUpdate:formatted-value"]=r=>{t["value-format"]=r,n("update:value",r)},t):(t.value=o.value,t["onUpdate:value"]=r=>{t.value=r,n("update:value",r)},t)}const _n=Q({name:"LcFormItem",props:{value:{type:[String,Number,Object,Boolean],required:!1,default:void 0},conf:{type:Object,required:!0}},emits:["update:value"],setup(t,{attrs:e,emit:o}){return()=>{const{__config__:n,tag:a}=t.conf||{},l=N(a);let r=Ge(n,e);r=Wo(r,t.conf,{props:t,emit:o});const i=zo(t.conf,r);return A(l,r,i)}}}),Vo=["cols","collapsed","collapsedRows","layoutShiftDisabled","responsive","itemResponsive","xGap","yGap"],Bo=Q({name:"LcForm",components:{FormItem:_n},props:{value:{type:Object,required:!0},conf:{type:Object,required:!0}},emits:["update:value"],setup(t,{emit:e,expose:o}){const n=Y(),a=ve({get(){return t.value},set(c){e("update:value",c)}}),l=ve(()=>{const{items:c}=t.conf,g=gn(c);return!u&&s(),g}),r=ve(()=>{const{fromGrid:c}=t.conf,g={};return Vo.forEach(v=>{Object.hasOwn(c,v)&&(g[v]=c[v])}),g}),i=ve(()=>t.conf.fromGlobal);let u=!1;const s=()=>{const{conf:{items:c},value:g}=t;a.value=c.reduce((v,_)=>{const{__vModel__:E}=_;return{[E]:void 0,...v}},g??{}),u=!0},f=()=>{e("update:value",d(a))};return o({formRef:n,validate(...c){var g;return(g=n.value)==null?void 0:g.validate(...c)},reset(){var c;(c=n.value)==null||c.restoreValidation()}}),{formRef:n,fromGrid:r,fromGlobal:i,formValue:a,formRules:l,bindUpdate:f}}}),Xo=(t,e)=>{const o=t.__vccOpts||t;for(const[n,a]of e)o[n]=a;return o};function Yo(t,e,o,n,a,l){const r=N("form-item"),i=N("n-form-item-gi"),u=N("n-grid"),s=N("n-form");return O(),ne(s,Ge({ref:"formRef"},t.fromGlobal,{model:t.formValue,rules:t.formRules}),{default:h(()=>[p(u,Nn(Mn(t.fromGrid)),{default:h(()=>[(O(!0),k(G,null,K(t.conf.items,f=>(O(),ne(i,Ge({key:f.__uuid__},f.__layout__,{label:f.label,path:f.__vModel__}),{default:h(()=>[p(r,{value:t.formValue[f.__vModel__],"onUpdate:value":[c=>t.formValue[f.__vModel__]=c,t.bindUpdate],conf:f},null,8,["value","onUpdate:value","conf"])]),_:2},1040,["label","path"]))),128))]),_:1},16)]),_:1},16,["model","rules"])}const Lo=Xo(Bo,[["render",Yo]]),Ho={class:"center-toolbar"},qo=Q({name:"CenterToolbar",inheritAttrs:!0}),Zo=Q({...qo,props:{designer:{default:void 0}},emits:["onUndo","onRedo","onPreview","onEmpty","onSave"],setup(t,{emit:e}){const o=t,n=f=>{const{designer:c}=o,v=`on${f.replace(/^\S/,_=>_.toUpperCase())}`;i.value=c.getConf(),c[f]((..._)=>{f==="preview"&&(a.value=_[0])}),e(v)},a=Y(!1),l=Y(),r=Y({}),i=Y({}),u=()=>{l.value.reset()},s=()=>{const{validate:f}=l.value;f(),console.log("表单提交信息:",Ut(r.value),"表单配置信息:",Ut(i.value))};return(f,c)=>{const g=he,v=Gn,_=Pe,E=Rt,F=Un,W=on;return O(),k(G,null,[j("div",Ho,[p(_,{quaternary:"",circle:"",size:"small",onClick:c[0]||(c[0]=C=>n("undo"))},{icon:h(()=>[p(v,null,{trigger:h(()=>[p(g,{component:d(Rn)},null,8,["component"])]),default:h(()=>[Se(" 撤销 ")]),_:1})]),_:1}),p(_,{quaternary:"",circle:"",size:"small",onClick:c[1]||(c[1]=C=>n("redo"))},{icon:h(()=>[p(v,null,{trigger:h(()=>[p(g,{component:d(Fn)},null,8,["component"])]),default:h(()=>[Se(" 恢复 ")]),_:1})]),_:1}),p(_,{quaternary:"",circle:"",size:"small",type:"info",onClick:c[2]||(c[2]=C=>n("preview"))},{icon:h(()=>[p(v,null,{trigger:h(()=>[p(g,{component:d($n)},null,8,["component"])]),default:h(()=>[Se(" 预览 ")]),_:1})]),_:1}),p(_,{quaternary:"",circle:"",size:"small",type:"error",onClick:c[3]||(c[3]=C=>n("empty"))},{icon:h(()=>[p(v,null,{trigger:h(()=>[p(g,{component:d(nn)},null,8,["component"])]),default:h(()=>[Se(" 清空 ")]),_:1})]),_:1}),p(_,{size:"small",type:"primary",onClick:c[4]||(c[4]=C=>n("save"))},{default:h(()=>[Se("保存")]),_:1})]),p(W,{show:d(a),"onUpdate:show":c[6]||(c[6]=C=>Ue(a)?a.value=C:null),"mask-closable":!1,"on-after-leave":()=>r.value={},size:"small",preset:"card",title:"选择图标",style:{width:"920px"}},{footer:h(()=>[p(F,null,{default:h(()=>[p(_,{type:"primary",tertiary:"",onClick:s},{default:h(()=>[Se("提交")]),_:1}),p(_,{type:"info",tertiary:"",onClick:u},{default:h(()=>[Se("重置")]),_:1})]),_:1})]),default:h(()=>[p(E,{style:{"max-height":"600px","padding-right":"10px"}},{default:h(()=>[p(d(Lo),{ref_key:"formRef",ref:l,value:d(r),"onUpdate:value":c[5]||(c[5]=C=>Ue(r)?r.value=C:null),class:"preview-form",conf:d(i)},null,8,["value","conf"])]),_:1})]),_:1},8,["show","on-after-leave"])],64)}}});const Ko=Ze(Zo,[["__scopeId","data-v-f4228483"]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),o.push.apply(o,n)}return o}function me(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?Xt(Object(o),!0).forEach(function(n){Qo(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Xt(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function at(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(e){return typeof e}:at=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(t)}function Qo(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function ye(){return ye=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ye.apply(this,arguments)}function Jo(t,e){if(t==null)return{};var o={},n=Object.keys(t),a,l;for(l=0;l<n.length;l++)a=n[l],!(e.indexOf(a)>=0)&&(o[a]=t[a]);return o}function ea(t,e){if(t==null)return{};var o=Jo(t,e),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var ta="1.15.0";function be(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var we=be(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=be(/Edge/i),Yt=be(/firefox/i),Xe=be(/safari/i)&&!be(/chrome/i)&&!be(/android/i),vn=be(/iP(ad|od|hone)/i),bn=be(/chrome/i)&&be(/android/i),yn={capture:!1,passive:!1};function I(t,e,o){t.addEventListener(e,o,!we&&yn)}function x(t,e,o){t.removeEventListener(e,o,!we&&yn)}function ct(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function na(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function fe(t,e,o,n){if(t){o=o||document;do{if(e!=null&&(e[0]===">"?t.parentNode===o&&ct(t,e):ct(t,e))||n&&t===o)return t;if(t===o)break}while(t=na(t))}return null}var Lt=/\s+/g;function ee(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Lt," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(Lt," ")}}function y(t,e,o){var n=t&&t.style;if(n){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),e===void 0?o:o[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=o+(typeof o=="string"?"":"px")}}function je(t,e){var o="";if(typeof t=="string")o=t;else do{var n=y(t,"transform");n&&n!=="none"&&(o=n+" "+o)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(o)}function wn(t,e,o){if(t){var n=t.getElementsByTagName(e),a=0,l=n.length;if(o)for(;a<l;a++)o(n[a],a);return n}return[]}function pe(){var t=document.scrollingElement;return t||document.documentElement}function z(t,e,o,n,a){if(!(!t.getBoundingClientRect&&t!==window)){var l,r,i,u,s,f,c;if(t!==window&&t.parentNode&&t!==pe()?(l=t.getBoundingClientRect(),r=l.top,i=l.left,u=l.bottom,s=l.right,f=l.height,c=l.width):(r=0,i=0,u=window.innerHeight,s=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||o)&&t!==window&&(a=a||t.parentNode,!we))do if(a&&a.getBoundingClientRect&&(y(a,"transform")!=="none"||o&&y(a,"position")!=="static")){var g=a.getBoundingClientRect();r-=g.top+parseInt(y(a,"border-top-width")),i-=g.left+parseInt(y(a,"border-left-width")),u=r+l.height,s=i+l.width;break}while(a=a.parentNode);if(n&&t!==window){var v=je(a||t),_=v&&v.a,E=v&&v.d;v&&(r/=E,i/=_,c/=_,f/=E,u=r+f,s=i+c)}return{top:r,left:i,bottom:u,right:s,width:c,height:f}}}function Ht(t,e,o){for(var n=Te(t,!0),a=z(t)[e];n;){var l=z(n)[o],r=void 0;if(o==="top"||o==="left"?r=a>=l:r=a<=l,!r)return n;if(n===pe())break;n=Te(n,!1)}return!1}function ze(t,e,o,n){for(var a=0,l=0,r=t.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==w.ghost&&(n||r[l]!==w.dragged)&&fe(r[l],o.draggable,t,!1)){if(a===e)return r[l];a++}l++}return null}function Ft(t,e){for(var o=t.lastElementChild;o&&(o===w.ghost||y(o,"display")==="none"||e&&!ct(o,e));)o=o.previousElementSibling;return o||null}function ae(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==w.clone&&(!e||ct(t,e))&&o++;return o}function qt(t){var e=0,o=0,n=pe();if(t)do{var a=je(t),l=a.a,r=a.d;e+=t.scrollLeft*l,o+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,o]}function oa(t,e){for(var o in t)if(t.hasOwnProperty(o)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[o][n])return Number(o)}return-1}function Te(t,e){if(!t||!t.getBoundingClientRect)return pe();var o=t,n=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var a=y(o);if(o.clientWidth<o.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return pe();if(n||e)return o;n=!0}}while(o=o.parentNode);return pe()}function aa(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function bt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ye;function En(t,e){return function(){if(!Ye){var o=arguments,n=this;o.length===1?t.call(n,o[0]):t.apply(n,o),Ye=setTimeout(function(){Ye=void 0},e)}}}function la(){clearTimeout(Ye),Ye=void 0}function Sn(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function Dn(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}var oe="Sortable"+new Date().getTime();function ra(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(y(a,"display")==="none"||a===w.ghost)){t.push({target:a,rect:z(a)});var l=me({},t[t.length-1].rect);if(a.thisAnimationDuration){var r=je(a,!0);r&&(l.top-=r.f,l.left-=r.e)}a.fromRect=l}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(oa(t,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var l=!1,r=0;t.forEach(function(i){var u=0,s=i.target,f=s.fromRect,c=z(s),g=s.prevFromRect,v=s.prevToRect,_=i.rect,E=je(s,!0);E&&(c.top-=E.f,c.left-=E.e),s.toRect=c,s.thisAnimationDuration&&bt(g,c)&&!bt(f,c)&&(_.top-c.top)/(_.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(u=sa(_,g,v,a.options)),bt(c,f)||(s.prevFromRect=f,s.prevToRect=c,u||(u=a.options.animation),a.animate(s,_,c,u)),u&&(l=!0,r=Math.max(r,u),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},u),s.thisAnimationDuration=u)}),clearTimeout(e),l?e=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),t=[]},animate:function(n,a,l,r){if(r){y(n,"transition",""),y(n,"transform","");var i=je(this.el),u=i&&i.a,s=i&&i.d,f=(a.left-l.left)/(u||1),c=(a.top-l.top)/(s||1);n.animatingX=!!f,n.animatingY=!!c,y(n,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=ia(n),y(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),y(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){y(n,"transition",""),y(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function ia(t){return t.offsetWidth}function sa(t,e,o,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*n.animation}var Me=[],yt={initializeByDefault:!0},Qe={mount:function(e){for(var o in yt)yt.hasOwnProperty(o)&&!(o in e)&&(e[o]=yt[o]);Me.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Me.push(e)},pluginEvent:function(e,o,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var l=e+"Global";Me.forEach(function(r){o[r.pluginName]&&(o[r.pluginName][l]&&o[r.pluginName][l](me({sortable:o},n)),o.options[r.pluginName]&&o[r.pluginName][e]&&o[r.pluginName][e](me({sortable:o},n)))})},initializePlugins:function(e,o,n,a){Me.forEach(function(i){var u=i.pluginName;if(!(!e.options[u]&&!i.initializeByDefault)){var s=new i(e,o,e.options);s.sortable=e,s.options=e.options,e[u]=s,ye(n,s.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var r=this.modifyOption(e,l,e.options[l]);typeof r<"u"&&(e.options[l]=r)}},getEventProperties:function(e,o){var n={};return Me.forEach(function(a){typeof a.eventProperties=="function"&&ye(n,a.eventProperties.call(o[a.pluginName],e))}),n},modifyOption:function(e,o,n){var a;return Me.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(a=l.optionListeners[o].call(e[l.pluginName],n))}),a}};function ua(t){var e=t.sortable,o=t.rootEl,n=t.name,a=t.targetEl,l=t.cloneEl,r=t.toEl,i=t.fromEl,u=t.oldIndex,s=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,g=t.originalEvent,v=t.putSortable,_=t.extraEventProperties;if(e=e||o&&o[oe],!!e){var E,F=e.options,W="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!we&&!Ke?E=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(n,!0,!0)),E.to=r||o,E.from=i||o,E.item=a||o,E.clone=l,E.oldIndex=u,E.newIndex=s,E.oldDraggableIndex=f,E.newDraggableIndex=c,E.originalEvent=g,E.pullMode=v?v.lastPutMode:void 0;var C=me(me({},_),Qe.getEventProperties(n,e));for(var V in C)E[V]=C[V];o&&o.dispatchEvent(E),F[W]&&F[W].call(e,E)}}var ca=["evt"],Z=function(e,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,l=ea(n,ca);Qe.pluginEvent.bind(w)(e,o,me({dragEl:m,parentEl:$,ghostEl:S,rootEl:M,nextEl:Ae,lastDownEl:lt,cloneEl:R,cloneHidden:Ce,dragStarted:We,putSortable:X,activeSortable:w.active,originalEvent:a,oldIndex:$e,oldDraggableIndex:Le,newIndex:te,newDraggableIndex:De,hideGhostForTarget:xn,unhideGhostForTarget:In,cloneNowHidden:function(){Ce=!0},cloneNowShown:function(){Ce=!1},dispatchSortableEvent:function(i){q({sortable:o,name:i,originalEvent:a})}},l))};function q(t){ua(me({putSortable:X,cloneEl:R,targetEl:m,rootEl:M,oldIndex:$e,oldDraggableIndex:Le,newIndex:te,newDraggableIndex:De},t))}var m,$,S,M,Ae,lt,R,Ce,$e,te,Le,De,et,X,Fe=!1,dt=!1,ft=[],Ie,se,wt,Et,Zt,Kt,We,Re,He,qe=!1,tt=!1,rt,L,St=[],Pt=!1,pt=[],gt=typeof document<"u",nt=vn,Qt=Ke||we?"cssFloat":"float",da=gt&&!bn&&!vn&&"draggable"in document.createElement("div"),Cn=function(){if(gt){if(we)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Tn=function(e,o){var n=y(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),l=ze(e,0,o),r=ze(e,1,o),i=l&&y(l),u=r&&y(r),s=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+z(l).width,f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+z(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&i.float&&i.float!=="none"){var c=i.float==="left"?"left":"right";return r&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return l&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||s>=a&&n[Qt]==="none"||r&&n[Qt]==="none"&&s+f>a)?"vertical":"horizontal"},fa=function(e,o,n){var a=n?e.left:e.top,l=n?e.right:e.bottom,r=n?e.width:e.height,i=n?o.left:o.top,u=n?o.right:o.bottom,s=n?o.width:o.height;return a===i||l===u||a+r/2===i+s/2},pa=function(e,o){var n;return ft.some(function(a){var l=a[oe].options.emptyInsertThreshold;if(!(!l||Ft(a))){var r=z(a),i=e>=r.left-l&&e<=r.right+l,u=o>=r.top-l&&o<=r.bottom+l;if(i&&u)return n=a}}),n},On=function(e){function o(l,r){return function(i,u,s,f){var c=i.options.group.name&&u.options.group.name&&i.options.group.name===u.options.group.name;if(l==null&&(r||c))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return o(l(i,u,s,f),r)(i,u,s,f);var g=(r?i:u).options.group.name;return l===!0||typeof l=="string"&&l===g||l.join&&l.indexOf(g)>-1}}var n={},a=e.group;(!a||at(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=o(a.pull,!0),n.checkPut=o(a.put),n.revertClone=a.revertClone,e.group=n},xn=function(){!Cn&&S&&y(S,"display","none")},In=function(){!Cn&&S&&y(S,"display","")};gt&&!bn&&document.addEventListener("click",function(t){if(dt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),dt=!1,!1},!0);var ke=function(e){if(m){e=e.touches?e.touches[0]:e;var o=pa(e.clientX,e.clientY);if(o){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=o,n.preventDefault=void 0,n.stopPropagation=void 0,o[oe]._onDragOver(n)}}},ma=function(e){m&&m.parentNode[oe]._isOutsideThisEl(e.target)};function w(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ye({},e),t[oe]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Tn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,i){r.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:w.supportPointer!==!1&&"PointerEvent"in window&&!Xe,emptyInsertThreshold:5};Qe.initializePlugins(this,t,o);for(var n in o)!(n in e)&&(e[n]=o[n]);On(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:da,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?I(t,"pointerdown",this._onTapStart):(I(t,"mousedown",this._onTapStart),I(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(I(t,"dragover",this),I(t,"dragenter",this)),ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ye(this,ra())}w.prototype={constructor:w,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Re=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,n=this.el,a=this.options,l=a.preventOnFilter,r=e.type,i=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(i||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,f=a.filter;if(Ea(n),!m&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||a.disabled)&&!s.isContentEditable&&!(!this.nativeDraggable&&Xe&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=fe(u,a.draggable,n,!1),!(u&&u.animated)&&lt!==u)){if($e=ae(u),Le=ae(u,a.draggable),typeof f=="function"){if(f.call(this,e,u,this)){q({sortable:o,rootEl:s,name:"filter",targetEl:u,toEl:n,fromEl:n}),Z("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=fe(s,c.trim(),n,!1),c)return q({sortable:o,rootEl:c,name:"filter",targetEl:u,fromEl:n,toEl:n}),Z("filter",o,{evt:e}),!0}),f)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!fe(s,a.handle,n,!1)||this._prepareDragStart(e,i,u)}}},_prepareDragStart:function(e,o,n){var a=this,l=a.el,r=a.options,i=l.ownerDocument,u;if(n&&!m&&n.parentNode===l){var s=z(n);if(M=l,m=n,$=m.parentNode,Ae=m.nextSibling,lt=n,et=r.group,w.dragged=m,Ie={target:m,clientX:(o||e).clientX,clientY:(o||e).clientY},Zt=Ie.clientX-s.left,Kt=Ie.clientY-s.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,m.style["will-change"]="all",u=function(){if(Z("delayEnded",a,{evt:e}),w.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Yt&&a.nativeDraggable&&(m.draggable=!0),a._triggerDragStart(e,o),q({sortable:a,name:"choose",originalEvent:e}),ee(m,r.chosenClass,!0)},r.ignore.split(",").forEach(function(f){wn(m,f.trim(),Dt)}),I(i,"dragover",ke),I(i,"mousemove",ke),I(i,"touchmove",ke),I(i,"mouseup",a._onDrop),I(i,"touchend",a._onDrop),I(i,"touchcancel",a._onDrop),Yt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),Z("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(Ke||we))){if(w.eventCanceled){this._onDrop();return}I(i,"mouseup",a._disableDelayedDrag),I(i,"touchend",a._disableDelayedDrag),I(i,"touchcancel",a._disableDelayedDrag),I(i,"mousemove",a._delayedDragTouchMoveHandler),I(i,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&I(i,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(u,r.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&Dt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?I(document,"pointermove",this._onTouchMove):o?I(document,"touchmove",this._onTouchMove):I(document,"mousemove",this._onTouchMove):(I(m,"dragend",this),I(M,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(Fe=!1,M&&m){Z("dragStarted",this,{evt:o}),this.nativeDraggable&&I(document,"dragover",ma);var n=this.options;!e&&ee(m,n.dragClass,!1),ee(m,n.ghostClass,!0),w.active=this,e&&this._appendGhost(),q({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(se){this._lastX=se.clientX,this._lastY=se.clientY,xn();for(var e=document.elementFromPoint(se.clientX,se.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(se.clientX,se.clientY),e!==o);)o=e;if(m.parentNode[oe]._isOutsideThisEl(e),o)do{if(o[oe]){var n=void 0;if(n=o[oe]._onDragOver({clientX:se.clientX,clientY:se.clientY,target:e,rootEl:o}),n&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);In()}},_onTouchMove:function(e){if(Ie){var o=this.options,n=o.fallbackTolerance,a=o.fallbackOffset,l=e.touches?e.touches[0]:e,r=S&&je(S,!0),i=S&&r&&r.a,u=S&&r&&r.d,s=nt&&L&&qt(L),f=(l.clientX-Ie.clientX+a.x)/(i||1)+(s?s[0]-St[0]:0)/(i||1),c=(l.clientY-Ie.clientY+a.y)/(u||1)+(s?s[1]-St[1]:0)/(u||1);if(!w.active&&!Fe){if(n&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(S){r?(r.e+=f-(wt||0),r.f+=c-(Et||0)):r={a:1,b:0,c:0,d:1,e:f,f:c};var g="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");y(S,"webkitTransform",g),y(S,"mozTransform",g),y(S,"msTransform",g),y(S,"transform",g),wt=f,Et=c,se=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!S){var e=this.options.fallbackOnBody?document.body:M,o=z(m,!0,nt,!0,e),n=this.options;if(nt){for(L=e;y(L,"position")==="static"&&y(L,"transform")==="none"&&L!==document;)L=L.parentNode;L!==document.body&&L!==document.documentElement?(L===document&&(L=pe()),o.top+=L.scrollTop,o.left+=L.scrollLeft):L=pe(),St=qt(L)}S=m.cloneNode(!0),ee(S,n.ghostClass,!1),ee(S,n.fallbackClass,!0),ee(S,n.dragClass,!0),y(S,"transition",""),y(S,"transform",""),y(S,"box-sizing","border-box"),y(S,"margin",0),y(S,"top",o.top),y(S,"left",o.left),y(S,"width",o.width),y(S,"height",o.height),y(S,"opacity","0.8"),y(S,"position",nt?"absolute":"fixed"),y(S,"zIndex","100000"),y(S,"pointerEvents","none"),w.ghost=S,e.appendChild(S),y(S,"transform-origin",Zt/parseInt(S.style.width)*100+"% "+Kt/parseInt(S.style.height)*100+"%")}},_onDragStart:function(e,o){var n=this,a=e.dataTransfer,l=n.options;if(Z("dragStart",this,{evt:e}),w.eventCanceled){this._onDrop();return}Z("setupClone",this),w.eventCanceled||(R=Dn(m),R.removeAttribute("id"),R.draggable=!1,R.style["will-change"]="",this._hideClone(),ee(R,this.options.chosenClass,!1),w.clone=R),n.cloneId=it(function(){Z("clone",n),!w.eventCanceled&&(n.options.removeCloneOnHide||M.insertBefore(R,m),n._hideClone(),q({sortable:n,name:"clone"}))}),!o&&ee(m,l.dragClass,!0),o?(dt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(x(document,"mouseup",n._onDrop),x(document,"touchend",n._onDrop),x(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(n,a,m)),I(document,"drop",n),y(m,"transform","translateZ(0)")),Fe=!0,n._dragStartId=it(n._dragStarted.bind(n,o,e)),I(document,"selectstart",n),We=!0,Xe&&y(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,n=e.target,a,l,r,i=this.options,u=i.group,s=w.active,f=et===u,c=i.sort,g=X||s,v,_=this,E=!1;if(Pt)return;function F(xe,_t){Z(xe,_,me({evt:e,isOwner:f,axis:v?"vertical":"horizontal",revert:r,dragRect:a,targetRect:l,canSort:c,fromSortable:g,target:n,completed:C,onMove:function(Ee,de){return ot(M,o,m,a,Ee,z(Ee),e,de)},changed:V},_t))}function W(){F("dragOverAnimationCapture"),_.captureAnimationState(),_!==g&&g.captureAnimationState()}function C(xe){return F("dragOverCompleted",{insertion:xe}),xe&&(f?s._hideClone():s._showClone(_),_!==g&&(ee(m,X?X.options.ghostClass:s.options.ghostClass,!1),ee(m,i.ghostClass,!0)),X!==_&&_!==w.active?X=_:_===w.active&&X&&(X=null),g===_&&(_._ignoreWhileAnimating=n),_.animateAll(function(){F("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(n===m&&!m.animated||n===o&&!n.animated)&&(Re=null),!i.dragoverBubble&&!e.rootEl&&n!==document&&(m.parentNode[oe]._isOutsideThisEl(e.target),!xe&&ke(e)),!i.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function V(){te=ae(m),De=ae(m,i.draggable),q({sortable:_,name:"change",toEl:o,newIndex:te,newDraggableIndex:De,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=fe(n,i.draggable,o,!0),F("dragOver"),w.eventCanceled)return E;if(m.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||_._ignoreWhileAnimating===n)return C(!1);if(dt=!1,s&&!i.disabled&&(f?c||(r=$!==M):X===this||(this.lastPutMode=et.checkPull(this,s,m,e))&&u.checkPut(this,s,m,e))){if(v=this._getDirection(e,n)==="vertical",a=z(m),F("dragOverValid"),w.eventCanceled)return E;if(r)return $=M,W(),this._hideClone(),F("revert"),w.eventCanceled||(Ae?M.insertBefore(m,Ae):M.appendChild(m)),C(!0);var b=Ft(o,i.draggable);if(!b||va(e,v,this)&&!b.animated){if(b===m)return C(!1);if(b&&o===e.target&&(n=b),n&&(l=z(n)),ot(M,o,m,a,n,l,e,!!n)!==!1)return W(),b&&b.nextSibling?o.insertBefore(m,b.nextSibling):o.appendChild(m),$=o,V(),C(!0)}else if(b&&_a(e,v,this)){var J=ze(o,0,i,!0);if(J===m)return C(!1);if(n=J,l=z(n),ot(M,o,m,a,n,l,e,!1)!==!1)return W(),o.insertBefore(m,J),$=o,V(),C(!0)}else if(n.parentNode===o){l=z(n);var D=0,T,H=m.parentNode!==o,B=!fa(m.animated&&m.toRect||a,n.animated&&n.toRect||l,v),le=v?"top":"left",ue=Ht(n,"top","top")||Ht(m,"top","top"),Oe=ue?ue.scrollTop:void 0;Re!==n&&(T=l[le],qe=!1,tt=!B&&i.invertSwap||H),D=ba(e,n,l,v,B?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,tt,Re===n);var re;if(D!==0){var ge=ae(m);do ge-=D,re=$.children[ge];while(re&&(y(re,"display")==="none"||re===S))}if(D===0||re===n)return C(!1);Re=n,He=D;var ie=n.nextElementSibling,ce=!1;ce=D===1;var Ne=ot(M,o,m,a,n,l,e,ce);if(Ne!==!1)return(Ne===1||Ne===-1)&&(ce=Ne===1),Pt=!0,setTimeout(ha,30),W(),ce&&!ie?o.appendChild(m):n.parentNode.insertBefore(m,ce?ie:n),ue&&Sn(ue,0,Oe-ue.scrollTop),$=m.parentNode,T!==void 0&&!tt&&(rt=Math.abs(T-z(n)[le])),V(),C(!0)}if(o.contains(m))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",ke),x(document,"mousemove",ke),x(document,"touchmove",ke)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var o=this.el,n=this.options;if(te=ae(m),De=ae(m,n.draggable),Z("drop",this,{evt:e}),$=m&&m.parentNode,te=ae(m),De=ae(m,n.draggable),w.eventCanceled){this._nulling();return}Fe=!1,tt=!1,qe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),At(this.cloneId),At(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xe&&y(document.body,"user-select",""),y(m,"transform",""),e&&(We&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),S&&S.parentNode&&S.parentNode.removeChild(S),(M===$||X&&X.lastPutMode!=="clone")&&R&&R.parentNode&&R.parentNode.removeChild(R),m&&(this.nativeDraggable&&x(m,"dragend",this),Dt(m),m.style["will-change"]="",We&&!Fe&&ee(m,X?X.options.ghostClass:this.options.ghostClass,!1),ee(m,this.options.chosenClass,!1),q({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),M!==$?(te>=0&&(q({rootEl:$,name:"add",toEl:$,fromEl:M,originalEvent:e}),q({sortable:this,name:"remove",toEl:$,originalEvent:e}),q({rootEl:$,name:"sort",toEl:$,fromEl:M,originalEvent:e}),q({sortable:this,name:"sort",toEl:$,originalEvent:e})),X&&X.save()):te!==$e&&te>=0&&(q({sortable:this,name:"update",toEl:$,originalEvent:e}),q({sortable:this,name:"sort",toEl:$,originalEvent:e})),w.active&&((te==null||te===-1)&&(te=$e,De=Le),q({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Z("nulling",this),M=m=$=S=Ae=R=lt=Ce=Ie=se=We=te=De=$e=Le=Re=He=X=et=w.dragged=w.ghost=w.clone=w.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=wt=Et=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),ga(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,n=this.el.children,a=0,l=n.length,r=this.options;a<l;a++)o=n[a],fe(o,r.draggable,this.el,!1)&&e.push(o.getAttribute(r.dataIdAttr)||wa(o));return e},sort:function(e,o){var n={},a=this.el;this.toArray().forEach(function(l,r){var i=a.children[r];fe(i,this.options.draggable,a,!1)&&(n[l]=i)},this),o&&this.captureAnimationState(),e.forEach(function(l){n[l]&&(a.removeChild(n[l]),a.appendChild(n[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return fe(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var n=this.options;if(o===void 0)return n[e];var a=Qe.modifyOption(this,e,o);typeof a<"u"?n[e]=a:n[e]=o,e==="group"&&On(n)},destroy:function(){Z("destroy",this);var e=this.el;e[oe]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ft.splice(ft.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ce){if(Z("hideClone",this),w.eventCanceled)return;y(R,"display","none"),this.options.removeCloneOnHide&&R.parentNode&&R.parentNode.removeChild(R),Ce=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ce){if(Z("showClone",this),w.eventCanceled)return;m.parentNode==M&&!this.options.group.revertClone?M.insertBefore(R,m):Ae?M.insertBefore(R,Ae):M.appendChild(R),this.options.group.revertClone&&this.animate(m,R),y(R,"display",""),Ce=!1}}};function ga(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ot(t,e,o,n,a,l,r,i){var u,s=t[oe],f=s.options.onMove,c;return window.CustomEvent&&!we&&!Ke?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=o,u.draggedRect=n,u.related=a||e,u.relatedRect=l||z(e),u.willInsertAfter=i,u.originalEvent=r,t.dispatchEvent(u),f&&(c=f.call(s,u,r)),c}function Dt(t){t.draggable=!1}function ha(){Pt=!1}function _a(t,e,o){var n=z(ze(o.el,0,o.options,!0)),a=10;return e?t.clientX<n.left-a||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-a||t.clientY<n.bottom&&t.clientX<n.left}function va(t,e,o){var n=z(Ft(o.el,o.options.draggable)),a=10;return e?t.clientX>n.right+a||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+a}function ba(t,e,o,n,a,l,r,i){var u=n?t.clientY:t.clientX,s=n?o.height:o.width,f=n?o.top:o.left,c=n?o.bottom:o.right,g=!1;if(!r){if(i&&rt<s*a){if(!qe&&(He===1?u>f+s*l/2:u<c-s*l/2)&&(qe=!0),qe)g=!0;else if(He===1?u<f+rt:u>c-rt)return-He}else if(u>f+s*(1-a)/2&&u<c-s*(1-a)/2)return ya(e)}return g=g||r,g&&(u<f+s*l/2||u>c-s*l/2)?u>f+s/2?1:-1:0}function ya(t){return ae(m)<ae(t)?1:-1}function wa(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function Ea(t){pt.length=0;for(var e=t.getElementsByTagName("input"),o=e.length;o--;){var n=e[o];n.checked&&pt.push(n)}}function it(t){return setTimeout(t,0)}function At(t){return clearTimeout(t)}gt&&I(document,"touchmove",function(t){(w.active||Fe)&&t.cancelable&&t.preventDefault()});w.utils={on:I,off:x,css:y,find:wn,is:function(e,o){return!!fe(e,o,e,!1)},extend:aa,throttle:En,closest:fe,toggleClass:ee,clone:Dn,index:ae,nextTick:it,cancelNextTick:At,detectDirection:Tn,getChild:ze};w.get=function(t){return t[oe]};w.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(w.utils=me(me({},w.utils),n.utils)),Qe.mount(n)})};w.create=function(t,e){return new w(t,e)};w.version=ta;var U=[],Ve,Nt,Mt=!1,Ct,Tt,mt,Be;function Sa(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(o){var n=o.originalEvent;this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):this.options.supportPointer?I(document,"pointermove",this._handleFallbackAutoScroll):n.touches?I(document,"touchmove",this._handleFallbackAutoScroll):I(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var n=o.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),Jt(),st(),la()},nulling:function(){mt=Nt=Ve=Mt=Be=Ct=Tt=null,U.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,n){var a=this,l=(o.touches?o.touches[0]:o).clientX,r=(o.touches?o.touches[0]:o).clientY,i=document.elementFromPoint(l,r);if(mt=o,n||this.options.forceAutoScrollFallback||Ke||we||Xe){Ot(o,this.options,i,n);var u=Te(i,!0);Mt&&(!Be||l!==Ct||r!==Tt)&&(Be&&Jt(),Be=setInterval(function(){var s=Te(document.elementFromPoint(l,r),!0);s!==u&&(u=s,st()),Ot(o,a.options,s,n)},10),Ct=l,Tt=r)}else{if(!this.options.bubbleScroll||Te(i,!0)===pe()){st();return}Ot(o,this.options,Te(i,!1),!1)}}},ye(t,{pluginName:"scroll",initializeByDefault:!0})}function st(){U.forEach(function(t){clearInterval(t.pid)}),U=[]}function Jt(){clearInterval(Be)}var Ot=En(function(t,e,o,n){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,i=e.scrollSpeed,u=pe(),s=!1,f;Nt!==o&&(Nt=o,st(),Ve=e.scroll,f=e.scrollFn,Ve===!0&&(Ve=Te(o,!0)));var c=0,g=Ve;do{var v=g,_=z(v),E=_.top,F=_.bottom,W=_.left,C=_.right,V=_.width,b=_.height,J=void 0,D=void 0,T=v.scrollWidth,H=v.scrollHeight,B=y(v),le=v.scrollLeft,ue=v.scrollTop;v===u?(J=V<T&&(B.overflowX==="auto"||B.overflowX==="scroll"||B.overflowX==="visible"),D=b<H&&(B.overflowY==="auto"||B.overflowY==="scroll"||B.overflowY==="visible")):(J=V<T&&(B.overflowX==="auto"||B.overflowX==="scroll"),D=b<H&&(B.overflowY==="auto"||B.overflowY==="scroll"));var Oe=J&&(Math.abs(C-a)<=r&&le+V<T)-(Math.abs(W-a)<=r&&!!le),re=D&&(Math.abs(F-l)<=r&&ue+b<H)-(Math.abs(E-l)<=r&&!!ue);if(!U[c])for(var ge=0;ge<=c;ge++)U[ge]||(U[ge]={});(U[c].vx!=Oe||U[c].vy!=re||U[c].el!==v)&&(U[c].el=v,U[c].vx=Oe,U[c].vy=re,clearInterval(U[c].pid),(Oe!=0||re!=0)&&(s=!0,U[c].pid=setInterval(function(){n&&this.layer===0&&w.active._onTouchMove(mt);var ie=U[this.layer].vy?U[this.layer].vy*i:0,ce=U[this.layer].vx?U[this.layer].vx*i:0;typeof f=="function"&&f.call(w.dragged.parentNode[oe],ce,ie,t,mt,U[this.layer].el)!=="continue"||Sn(U[this.layer].el,ce,ie)}.bind({layer:c}),24))),c++}while(e.bubbleScroll&&g!==u&&(g=Te(g,!1)));Mt=s}},30),kn=function(e){var o=e.originalEvent,n=e.putSortable,a=e.dragEl,l=e.activeSortable,r=e.dispatchSortableEvent,i=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var s=n||l;i();var f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,c=document.elementFromPoint(f.clientX,f.clientY);u(),s&&!s.el.contains(c)&&(r("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function $t(){}$t.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=ze(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(o,a):this.sortable.el.appendChild(o),this.sortable.animateAll(),n&&n.animateAll()},drop:kn};ye($t,{pluginName:"revertOnSpill"});function Gt(){}Gt.prototype={onSpill:function(e){var o=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),a.animateAll()},drop:kn};ye(Gt,{pluginName:"removeOnSpill"});w.mount(new Sa);w.mount(Gt,$t);const Da={sort:!0,delay:0,delayOnTouchOnly:!1,touchStartThreshold:0,disabled:!1,store:null,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",preventOnFilter:!0,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:1,direction:"horizontal",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,dragoverBubble:!1,removeCloneOnHide:!0,emptyInsertThreshold:5};function Ca(t){t.parentNode&&t.parentNode.removeChild(t)}function Ta(t){return/^[a-z][a-z0-9]*$/.test(t)}const en=Symbol("dragData"),Pn=["setData","chooseData","onChoose","onUnchoose","onStart","onEnd","onAdd","onUpdate","onSort","onRemove","onFilter","onMove","onClone","onChange"],Oa=Pn.reduce((t,e)=>(t[e]=Function,t),{});function xa({props:t,emit:e}){const o=Y(),{modelValue:n}=ut(t),a=Y();function l(){d(a)&&d(a).destroy();const r=jn()?.vnode.el,i={onAdd(s){const{pullMode:f,newIndex:c}=s;if(f){const g=_e(d(n)),v=s.item[en];g.splice(c,0,v),Ca(s.item),e("update:modelValue",g,v)}},onRemove(s){const{pullMode:f}=s;if(f===!0){const c=_e(d(n));c.splice(s.oldIndex,1),e("update:modelValue",c)}},onEnd(s){const{pullMode:f,oldIndex:c,newIndex:g}=s;if(!f){const v=_e(d(n)),_=v.splice(c,1);v.splice(g,0,..._),e("update:modelValue",v,v[g])}}},u=Pn.filter(s=>t[s]).reduce((s,f)=>(s[f]=t[f],s),{});a.value=new w(r,{...Da,...t.config,...i,...u,onChoose(s){let c=_e(d(n))[s.oldIndex];u.chooseData&&(c=u.chooseData(c,s.oldIndex)),s.item[en]=c}})}return[o,{init:l,sortableInstance:a}]}const An=Q({name:"LDraggable",props:{modelValue:{type:Array,required:!0,default:()=>[]},tag:{type:String,required:!1,default:"div"},config:{type:Object,required:!1,default:void 0},...Oa},emits:["update:modelValue"],setup(t,{slots:e,emit:o,attrs:n,expose:a}){const{tag:l}=t,r=Ta(l);let i=l;r||(i=N(l));const[u,{init:s,sortableInstance:f}]=xa({props:t,emit:o});return an(()=>{s()}),a({getInstance:()=>d(f)}),()=>{const{modelValue:c}=t;let g=r?e.empty?.():()=>e.empty?.();return c.length&&(g=r?e.default?.():()=>e.default?.()),A(i,{...n,ref:u},g)}}}),Ia={class:"components-title"},ka=Q({name:"LeftPanel",inheritAttrs:!0}),Pa=Q({...ka,setup(t){const e=Y([]);an(async()=>{e.value=await uo()});const o=({icon:n})=>{const a=_e(co(n));return a.__uuid__=pn(),a.__vModel__=mn(`${n}-`),a.__layout__.span=24,a};return(n,a)=>{const l=N("svg-icon");return O(!0),k(G,null,K(d(e),(r,i)=>(O(),k("section",{key:i,class:"components-panel"},[j("div",Ia,[p(l,{class:"svg-icon-r",name:"component"}),j("span",null,It(r.title),1)]),p(d(An),{modelValue:r.list,"onUpdate:modelValue":u=>r.list=u,class:"components-draggable",config:{group:{name:d(fn),pull:"clone",put:!1,revertClone:!0},sort:!1},"choose-data":o},{default:h(()=>[(O(!0),k(G,null,K(r.list,u=>(O(),k("div",{key:u.__uuid__,class:"lc-draggable"},[p(l,{name:u.icon},null,8,["name"]),j("span",null,It(u.text),1)]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","config"])]))),128)}}});const Aa=Ze(Pa,[["__scopeId","data-v-59a717f8"]]),tn={RadioGroup(t){const{type:e,options:o,space:n}=t,a=e==="button",l=N(a?"n-radio-button":"n-radio"),r=N("n-space");return a?o.map(i=>A(l,i)):A(r,n,()=>o.map(i=>A(l,i)))},CheckboxGroup(t){const{options:e,space:o}=t,n=N("n-checkbox"),a=N("n-space");return A(a,o,()=>e.map(l=>A(n,l)))}};function Na(t){return["true","false"].includes(t)?JSON.parse(t):t??void 0}const xt=Q({name:"WidgetItem",props:{field:{type:Object,default:()=>({})},fields:{type:Object,default:()=>({})},model:{type:Object,default:()=>({})}},setup(t){return{FormItem:N("n-form-item"),getFieldValue:a=>{const{model:l}=t;return a.includes(".")?a.split(".").reduce((u,s)=>u?.[s],l):t?.model?.[a]},setFieldValue:(a,l)=>{const r=Na(l),{model:i}=ut(t);if(a.includes(".")){const u=a.split("."),[s,...f]=u.reverse(),c=f.reverse().reduce((g,v)=>g[v],i.value);c[s]=r}else i&&i.value&&(i.value[a]=r)}}},render(t){const{FormItem:e,getFieldValue:o,setFieldValue:n,field:a}=t,l=N(a.component),r=tn[l.name]&&tn[l.name](a.slot);return A(e,{label:a.label,path:a.path,labelStyle:a.label.length>5?{fontSize:"12px"}:{}},()=>A(l,{...a.props,value:o(a.path),"onUpdate:checked":i=>{Object.values(a.emits||"").forEach(u=>{u(i,t.model,t.fields)}),n(a.path,i)},"onUpdate:value":i=>{Object.values(a.emits||"").forEach(u=>{u(i,t.model,t.fields)}),n(a.path,i)}},()=>r))}}),ht=t=>(un("data-v-e80c2805"),t=t(),cn(),t),Ma=ht(()=>j("span",{class:"divider-label"},"选项",-1)),Ra={style:{padding:"0 10px"}},Fa=ht(()=>j("span",null,"添加选项",-1)),$a={style:{padding:"0 10px"}},Ga=ht(()=>j("span",null,"添加选项",-1)),Ua={style:{padding:"0 18px"}},ja=ht(()=>j("span",null,"添加规则",-1)),za=Q({name:"WidgetSetting",inheritAttrs:!0}),Wa=Q({...za,props:{widget:{default:void 0}},setup(t){const e=t,{common:o,rules:n}=zt,a=Y(_e(zt)),l=ve(()=>{const{tagType:D}=e.widget;return d(a)[D].filter(T=>T.hidden?T.hidden(e.widget):!0)}),r=ve(()=>{const{tagType:D}=e.widget;return["Select","Cascader","Radio","Checkbox"].includes(D)}),i=ve({get(){return J()},set(D){const{tagType:T,__slot__:H,__config__:B}=e.widget;["Checkbox","Radio"].includes(T)?H.default.options=D:B.options=D}}),u=()=>{i.value.push({label:"",value:""})},s=D=>{J().splice(D,1)},f=Y(!1),c=Y({}),g=Y({label:"",value:""}),v=(D,T)=>{c.value=T},_=()=>{c.value={},g.value={label:"",value:""}},E={trigger:["input","blur"],message:"内容不能为空",validator({field:D,message:T}){if(g.value[D],!g.value[D])return new Error(T)}},F=({option:D})=>A(Xn,{},()=>[A(Pe,{title:"添加",text:!0,onClick(T){T.stopPropagation(),W(D)}},()=>A(he,{component:Vn})),A(Pe,{title:"删除",text:!0,onClick(T){T.stopPropagation(),fo(d(i),D)}},()=>A(he,{component:Bn}))]),W=D=>{f.value=!0,c.value=D},C=()=>{const{label:D,value:T}=d(g);if(!D||!T)return window.$message.error("选项配置不能为空"),!1;if(d(c))return d(c).children?d(c).children.push({label:D,value:T}):d(c).children=[{label:D,value:T}],!0;const{__config__:{options:H=[]}}=e.widget;return H.push({children:void 0,label:D,value:T}),!0},V=()=>{const{__rules__:D}=e.widget;D.push({message:void 0,pattern:void 0})},b=D=>{const{__rules__:T}=e.widget;T.splice(D,1)};function J(){const{tagType:D,__slot__:T,__config__:H}=e.widget;return["Checkbox","Radio"].includes(D)?T.default.options:H.options}return(D,T)=>{const H=Yn,B=Ln,le=ln,ue=Hn,Oe=qn,re=Zn,ge=Kn,ie=rn,ce=Qn,Ne=sn,xe=Jn,_t=on;return O(),k(G,null,[p(Ne,{class:"widget-setting",model:e.widget,"label-width":"5.5rem","label-placement":"left","show-feedback":!1},{default:h(()=>[p(ce,{"default-expanded-names":"extendConfig"},{default:h(()=>[p(H,{title:"基础属性",name:"commonConfig"},{default:h(()=>[(O(!0),k(G,null,K(d(o),P=>(O(),ne(d(xt),{key:P.label,field:P,model:e.widget,fields:d(o)},null,8,["field","model","fields"]))),128))]),_:1}),p(H,{title:"高级属性",name:"extendConfig"},{default:h(()=>[(O(!0),k(G,null,K(d(l),P=>(O(),ne(d(xt),{key:P.label,field:P,model:e.widget,fields:d(l)},null,8,["field","model","fields"]))),128)),d(r)?(O(),k(G,{key:0},[p(B,{dashed:""},{default:h(()=>[Ma]),_:1}),D.widget?.tagType!=="Cascader"?(O(),k(G,{key:0},[(O(!0),k(G,null,K(d(i),(P,Ee)=>(O(),k("div",{key:Ee,class:"opt-draggable"},[p(Oe,null,{default:h(()=>[p(le,{value:P.label,"onUpdate:value":de=>P.label=de,placeholder:"选项名"},null,8,["value","onUpdate:value"]),p(le,{value:P.value,"onUpdate:value":de=>P.value=de,placeholder:"选项值"},null,8,["value","onUpdate:value"]),p(ue,{checkable:"",size:"large",class:"tag-draggable",onClick:de=>s(Ee)},{default:h(()=>[p(d(he),{size:"18",component:d(zn),class:"btn-error"},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),j("div",Ra,[p(d(Pe),{text:"",type:"info",onClick:u},{icon:h(()=>[p(d(he),{component:d(vt)},null,8,["component"])]),default:h(()=>[Fa]),_:1})])],64)):(O(),k(G,{key:1},[p(re,{data:d(i),"block-line":"","key-field":"value","expand-on-click":"","render-suffix":F},null,8,["data"]),j("div",$a,[p(d(Pe),{text:"",type:"info",onClick:T[0]||(T[0]=()=>W())},{icon:h(()=>[p(d(he),{component:d(vt)},null,8,["component"])]),default:h(()=>[Ga]),_:1})])],64))],64)):kt("",!0)]),_:1}),p(H,{title:"校验规则",name:"rulesConfig"},{default:h(()=>[(O(!0),k(G,null,K(d(n),P=>(O(),ne(d(xt),{key:P.label,field:P,model:e.widget,fields:d(n)},null,8,["field","model","fields"]))),128)),(O(!0),k(G,null,K(e.widget.__rules__,(P,Ee)=>(O(),k("div",{key:Ee,class:"rule-item"},[p(d(Pe),{class:"rule-delete",text:"",onClick:()=>b(Ee)},{default:h(()=>[p(d(he),{size:"18",component:d(Wn)},null,8,["component"])]),_:2},1032,["onClick"]),p(ie,{label:"表达式","label-width":"5em"},{default:h(()=>[p(ge,{value:P.pattern,"onUpdate:value":de=>P.pattern=de,options:d(So),filterable:"",tag:"",clearable:"",placeholder:"可输入正则，如：/\\\\d+/"},null,8,["value","onUpdate:value","options"])]),_:2},1024),p(ie,{label:"错误提示","label-width":"5em"},{default:h(()=>[p(le,{value:P.message,"onUpdate:value":de=>P.message=de,clearable:""},null,8,["value","onUpdate:value"])]),_:2},1024)]))),128)),j("div",Ua,[p(d(Pe),{text:"",type:"info",onClick:V},{icon:h(()=>[p(d(he),{component:d(vt)},null,8,["component"])]),default:h(()=>[ja]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"]),p(_t,{show:d(f),"onUpdate:show":T[3]||(T[3]=P=>Ue(f)?f.value=P:null),"mask-closable":!1,"on-after-leave":_,size:"small",preset:"dialog",title:"添加选项",style:{width:"580px"},"positive-text":"确认",onPositiveClick:C},{default:h(()=>[p(ie,{label:"上级选项","label-placement":"left","label-width":"6em"},{default:h(()=>[p(xe,{"block-line":"","default-value":d(c)?.value,options:d(i),"on-update:value":v,"default-expand-all":"","key-field":"value"},null,8,["default-value","options"])]),_:1}),p(ie,{label:"选项名","label-placement":"left","label-width":"6em",path:"label",rule:E},{default:h(()=>[p(le,{value:d(g).label,"onUpdate:value":T[1]||(T[1]=P=>d(g).label=P)},null,8,["value"])]),_:1}),p(ie,{label:"选项值","label-placement":"left","label-width":"6em",path:"value",rule:E},{default:h(()=>[p(le,{value:d(g).value,"onUpdate:value":T[2]||(T[2]=P=>d(g).value=P)},null,8,["value"])]),_:1})]),_:1},8,["show"])],64)}}});const Va=Ze(Wa,[["__scopeId","data-v-e80c2805"]]),Ba={class:"right-tab"},Xa={class:"right-content"},Ya=Q({name:"RightPanel",inheritAttrs:!0}),La=Q({...Ya,props:{designer:{default:void 0},form:{},widget:{default:void 0}},setup(t){const e=t,o={widget:"组件属性",form:"表单属性"},n=Y("widget"),{form:a,widget:l}=ut(e),r=wo.map(u=>({label:u,value:u})),i=ve({get(){return e.form.fromGrid.xGap},set(u){const{fromGrid:s}=ut(e.form);s.value.xGap=s.value.yGap=u}});return(u,s)=>{const f=eo,c=to,g=dn,v=ln,_=rn,E=no,F=oo,W=po,C=ao,V=Rt;return O(),k(G,null,[j("div",Ba,[p(c,{value:d(n),"onUpdate:value":s[0]||(s[0]=b=>Ue(n)?n.value=b:null),"justify-content":"space-evenly",type:"line"},{default:h(()=>[(O(),k(G,null,K(o,(b,J)=>p(f,{key:J,name:J},{default:h(()=>[Se(It(b),1)]),_:2},1032,["name"])),64))]),_:1},8,["value"])]),p(V,{class:"app-panel"},{default:h(()=>[j("div",Xa,[d(n)==="widget"?(O(),k(G,{key:0},[d(l)?(O(),ne(Va,{key:d(l).__uuid__,widget:d(l),"onUpdate:widget":s[1]||(s[1]=b=>Ue(l)?l.value=b:null)},null,8,["widget"])):(O(),ne(g,{key:1,size:"huge",description:"未选择控件"}))],64)):kt("",!0),d(n)==="form"?(O(),k(G,{key:1},[p(_,{label:"表单名称","label-placement":"left"},{default:h(()=>[p(v,{value:d(a).name,"onUpdate:value":s[2]||(s[2]=b=>d(a).name=b)},null,8,["value"])]),_:1}),p(_,{label:"表单尺寸","label-placement":"left"},{default:h(()=>[p(F,{value:d(a).fromGlobal.size,"onUpdate:value":s[3]||(s[3]=b=>d(a).fromGlobal.size=b),name:"radiobuttongroup1"},{default:h(()=>[(O(!0),k(G,null,K(d(vo),b=>(O(),ne(E,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),p(_,{label:"标签位置","label-placement":"left"},{default:h(()=>[p(F,{value:d(a).fromGlobal.labelPlacement,"onUpdate:value":s[4]||(s[4]=b=>d(a).fromGlobal.labelPlacement=b),name:"radiobuttongroup1"},{default:h(()=>[(O(!0),k(G,null,K(d(bo),b=>(O(),ne(E,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),p(_,{label:"标签对齐","label-placement":"left"},{default:h(()=>[p(F,{value:d(a).fromGlobal.labelAlign,"onUpdate:value":s[5]||(s[5]=b=>d(a).fromGlobal.labelAlign=b),name:"radiobuttongroup1"},{default:h(()=>[(O(!0),k(G,null,K(d(yo),b=>(O(),ne(E,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),p(_,{label:"标签宽度","label-placement":"left"},{default:h(()=>[p(W,{value:d(a).fromGlobal.labelWidth,"onUpdate:value":s[6]||(s[6]=b=>d(a).fromGlobal.labelWidth=b),options:d(r)},null,8,["value","options"])]),_:1}),p(_,{label:"栅格间隔","label-placement":"left"},{default:h(()=>[p(C,{value:d(i),"onUpdate:value":s[7]||(s[7]=b=>Ue(i)?i.value=b:null),"button-placement":"both",precision:0,step:"1",max:"999"},null,8,["value"])]),_:1}),p(_,{label:"星号位置","label-placement":"left"},{default:h(()=>[p(F,{value:d(a).fromGlobal.requireMarkPlacement,"onUpdate:value":s[8]||(s[8]=b=>d(a).fromGlobal.requireMarkPlacement=b),name:"radiobuttongroup1"},{default:h(()=>[(O(!0),k(G,null,K(d(Eo),b=>(O(),ne(E,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1})],64)):kt("",!0)])]),_:1})],64)}}});const Ha=Ze(La,[["__scopeId","data-v-55b87999"]]),qa=()=>{const t=Y(),e=Y({}),o=Y(),n=Y({name:"naiveui 表单",fromGrid:ho,fromGlobal:_o,items:[]}),a=new go(50),l={undo(){const r=a.go(-1);d(n).items=r},redo(){const r=a.go(1);d(n).items=r},preview(r){r(!0)},empty(){d(n).items.length&&(o.value=void 0,d(n).items=[],l.storage())},save(){console.log("widgets-Config",e.value,d(n))},getConf(){return d(n)},getActiveWidget(){return o},setActiveWidget(r){o.value=r},copyWidget(r){const i={..._e(r),__uuid__:pn(),__vModel__:mn(r.tag)};o.value=i,d(n).items.push(i),l.storage()},deleteWidget(r){d(o)===d(n).items[r]&&(o.value=d(n).items[0]),d(n).items.splice(r,1),l.storage()},storage(){a.push(d(n).items)}};return[l,{formData:e,formConfig:n,elFormRef:t,activeWidget:o}]},Za=t=>(un("data-v-4398884c"),t=t(),cn(),t),Ka={class:"app-left"},Qa=Za(()=>j("div",{class:"left-logo"},"表单设计器",-1)),Ja={class:"app-center"},el={class:"form-tool"},tl=["onClick"],nl=["onClick"],ol={class:"app-right"},al=Q({name:"PageEditor",inheritAttrs:!0}),ll=Q({...al,setup(t){const e={group:{name:Wt,pull:!0,put:[fn,Wt]}},[o,{formData:n,formConfig:a,elFormRef:l,activeWidget:r}]=qa(),i=ve(()=>{const{items:s}=d(a);return gn(s)}),u=(s,f)=>{d(a).items=s,o.setActiveWidget(f),o.storage()};return mo.$on("slider:range",({__vModel__:s,__config__:f})=>{n.value[s]=f.defaultValue}),(s,f)=>{const c=Rt,g=he,v=ro,_=dn,E=io,F=sn,W=so;return O(),ne(W,{class:"app-container",tag:"section"},{default:h(()=>[j("div",Ka,[Qa,p(c,{class:"app-panel left-panel"},{default:h(()=>[p(Aa)]),_:1})]),j("div",Ja,[p(Ko,{designer:d(o)},null,8,["designer"]),p(c,{class:"app-panel"},{default:h(()=>[p(F,Ge({ref_key:"elFormRef",ref:l},d(a).fromGlobal,{model:d(n),rules:d(i)}),{default:h(()=>[p(d(An),Ge(d(a).fromGrid,{"model-value":d(a).items,config:e,tag:"NGrid",class:"center-editor","onUpdate:modelValue":u}),{empty:h(()=>[p(E,{span:24,class:"center-empty",draggable:"false"},{default:h(()=>[p(_,{size:"huge",description:"从左侧选择控件进行表单设计"})]),_:1})]),default:h(()=>[(O(!0),k(G,null,K(d(a).items,(C,V)=>(O(),ne(v,Ge({key:C.__uuid__},C.__layout__,{label:C.label,"show-feedback":!1,path:C.__vModel__,class:["center-row",{on:d(r)?.__uuid__===C.__uuid__}],onClick:b=>d(o).setActiveWidget(C)}),{default:h(()=>[p(d(_n),{value:d(n)[C.__vModel__],"onUpdate:value":b=>d(n)[C.__vModel__]=b,conf:C},null,8,["value","onUpdate:value","conf"]),j("div",el,[j("span",{class:"form-tool-btn icon-copy",onClick:jt(b=>d(o).copyWidget(C),["stop"])},[p(g,{size:"16",component:d(lo)},null,8,["component"])],8,tl),j("span",{class:"form-tool-btn icon-delete",onClick:jt(b=>d(o).deleteWidget(V),["stop"])},[p(g,{size:"16",component:d(nn)},null,8,["component"])],8,nl)])]),_:2},1040,["label","path","class","onClick"]))),128))]),_:1},16,["model-value"])]),_:1},16,["model","rules"])]),_:1})]),j("div",ol,[p(Ha,{designer:d(o),widget:d(r),form:d(a)},null,8,["designer","widget","form"])])]),_:1})}}});const sl=Ze(ll,[["__scopeId","data-v-4398884c"]]);export{sl as default};
