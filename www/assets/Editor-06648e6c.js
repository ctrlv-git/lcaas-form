import{aQ as we,d as H,o as O,aF as W,a as v,w,u as p,aR as yn,aA as ye,aS as wn,aT as En,aU as Ht,T as qt,au as Sn,v as Dn,aE as pe,az as et,aV as Cn,r as M,aO as Dt,ay as k,aW as re,aG as K,aH as L,aB as tt,ax as Kt,c as te,aX as Tn,aY as On,O as Qt,aC as ut,aD as At,aZ as In,aq as xn,a_ as Jt,U as Pn,P as An,ab as Nn,ac as Mn,X as kn,aJ as Zt,a$ as He,b0 as Nt,b1 as Fn,Q as Rn,S as Gn,M as jn,aK as $n,aL as Wn}from"./vendor-0b8471c8.js";import{_ as lt,g as Xn,r as en,a as Bn,b as Ct,c as Tt,f as Mt,d as zn,e as ct,h as kt}from"./index-27ea04e8.js";class Yn{step=0;max=0;#e=[];constructor(e=100){this.max=e??100}get value(){return this.#e[this.step-1]}set value(e){this.push(we(e))}undo(){return this.go(-1)}redo(){return this.go(1)}go(e){return e=this.step+e,e=Math.max(0,Math.min(e,this.max,this.#e.length)),this.step=e,this.#e[this.step-1]}empty(){this.step=0,this.#e=[]}push(e){this.#e.length=this.step,this.#e.length>=this.max?this.#e.shift():this.step+=1,this.#e.push(we(e))}}const Un={class:"center-toolbar"},Ln=H({name:"CenterToolbar",inheritAttrs:!0}),Vn=H({...Ln,props:{designer:{default:void 0}},emits:["onUndo","onRedo","onPreview","onEmpty","onSave"],setup(t,{emit:e}){const o=t,n=a=>{const i=`on${a.replace(/^\S/,s=>s.toUpperCase())}`;o?.designer[a](),e(i)};return(a,r)=>{const i=qt,s=Sn,u=Dn;return O(),W("div",Un,[v(u,{quaternary:"",circle:"",size:"small",onClick:r[0]||(r[0]=l=>n("undo"))},{icon:w(()=>[v(s,null,{trigger:w(()=>[v(i,{component:p(yn)},null,8,["component"])]),default:w(()=>[ye(" 撤销 ")]),_:1})]),_:1}),v(u,{quaternary:"",circle:"",size:"small",onClick:r[1]||(r[1]=l=>n("redo"))},{icon:w(()=>[v(s,null,{trigger:w(()=>[v(i,{component:p(wn)},null,8,["component"])]),default:w(()=>[ye(" 恢复 ")]),_:1})]),_:1}),v(u,{quaternary:"",circle:"",size:"small",type:"info",onClick:r[2]||(r[2]=l=>n("preview"))},{icon:w(()=>[v(s,null,{trigger:w(()=>[v(i,{component:p(En)},null,8,["component"])]),default:w(()=>[ye(" 预览 ")]),_:1})]),_:1}),v(u,{quaternary:"",circle:"",size:"small",type:"error",onClick:r[3]||(r[3]=l=>n("empty"))},{icon:w(()=>[v(s,null,{trigger:w(()=>[v(i,{component:p(Ht)},null,8,["component"])]),default:w(()=>[ye(" 清空 ")]),_:1})]),_:1}),v(u,{size:"small",type:"primary",onClick:r[4]||(r[4]=l=>n("save"))},{default:w(()=>[ye("保存")]),_:1})])}}});const Hn=lt(Vn,[["__scopeId","data-v-b30e0d57"]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ft(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),o.push.apply(o,n)}return o}function oe(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?Ft(Object(o),!0).forEach(function(n){qn(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Ft(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function qe(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(e){return typeof e}:qe=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(t)}function qn(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function le(){return le=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},le.apply(this,arguments)}function Kn(t,e){if(t==null)return{};var o={},n=Object.keys(t),a,r;for(r=0;r<n.length;r++)a=n[r],!(e.indexOf(a)>=0)&&(o[a]=t[a]);return o}function Qn(t,e){if(t==null)return{};var o=Kn(t,e),n,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var Jn="1.15.0";function ie(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var se=ie(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xe=ie(/Edge/i),Rt=ie(/firefox/i),Re=ie(/safari/i)&&!ie(/chrome/i)&&!ie(/android/i),tn=ie(/iP(ad|od|hone)/i),nn=ie(/chrome/i)&&ie(/android/i),on={capture:!1,passive:!1};function C(t,e,o){t.addEventListener(e,o,!se&&on)}function D(t,e,o){t.removeEventListener(e,o,!se&&on)}function nt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Zn(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ee(t,e,o,n){if(t){o=o||document;do{if(e!=null&&(e[0]===">"?t.parentNode===o&&nt(t,e):nt(t,e))||n&&t===o)return t;if(t===o)break}while(t=Zn(t))}return null}var Gt=/\s+/g;function Y(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Gt," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(Gt," ")}}function m(t,e,o){var n=t&&t.style;if(n){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),e===void 0?o:o[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=o+(typeof o=="string"?"":"px")}}function Te(t,e){var o="";if(typeof t=="string")o=t;else do{var n=m(t,"transform");n&&n!=="none"&&(o=n+" "+o)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(o)}function an(t,e,o){if(t){var n=t.getElementsByTagName(e),a=0,r=n.length;if(o)for(;a<r;a++)o(n[a],a);return n}return[]}function ne(){var t=document.scrollingElement;return t||document.documentElement}function N(t,e,o,n,a){if(!(!t.getBoundingClientRect&&t!==window)){var r,i,s,u,l,f,c;if(t!==window&&t.parentNode&&t!==ne()?(r=t.getBoundingClientRect(),i=r.top,s=r.left,u=r.bottom,l=r.right,f=r.height,c=r.width):(i=0,s=0,u=window.innerHeight,l=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||o)&&t!==window&&(a=a||t.parentNode,!se))do if(a&&a.getBoundingClientRect&&(m(a,"transform")!=="none"||o&&m(a,"position")!=="static")){var h=a.getBoundingClientRect();i-=h.top+parseInt(m(a,"border-top-width")),s-=h.left+parseInt(m(a,"border-left-width")),u=i+r.height,l=s+r.width;break}while(a=a.parentNode);if(n&&t!==window){var E=Te(a||t),b=E&&E.a,S=E&&E.d;E&&(i/=S,s/=b,c/=b,f/=S,u=i+f,l=s+c)}return{top:i,left:s,bottom:u,right:l,width:c,height:f}}}function jt(t,e,o){for(var n=he(t,!0),a=N(t)[e];n;){var r=N(n)[o],i=void 0;if(o==="top"||o==="left"?i=a>=r:i=a<=r,!i)return n;if(n===ne())break;n=he(n,!1)}return!1}function Oe(t,e,o,n){for(var a=0,r=0,i=t.children;r<i.length;){if(i[r].style.display!=="none"&&i[r]!==_.ghost&&(n||i[r]!==_.dragged)&&ee(i[r],o.draggable,t,!1)){if(a===e)return i[r];a++}r++}return null}function Ot(t,e){for(var o=t.lastElementChild;o&&(o===_.ghost||m(o,"display")==="none"||e&&!nt(o,e));)o=o.previousElementSibling;return o||null}function q(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_.clone&&(!e||nt(t,e))&&o++;return o}function $t(t){var e=0,o=0,n=ne();if(t)do{var a=Te(t),r=a.a,i=a.d;e+=t.scrollLeft*r,o+=t.scrollTop*i}while(t!==n&&(t=t.parentNode));return[e,o]}function eo(t,e){for(var o in t)if(t.hasOwnProperty(o)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[o][n])return Number(o)}return-1}function he(t,e){if(!t||!t.getBoundingClientRect)return ne();var o=t,n=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var a=m(o);if(o.clientWidth<o.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return ne();if(n||e)return o;n=!0}}while(o=o.parentNode);return ne()}function to(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function dt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ge;function rn(t,e){return function(){if(!Ge){var o=arguments,n=this;o.length===1?t.call(n,o[0]):t.apply(n,o),Ge=setTimeout(function(){Ge=void 0},e)}}}function no(){clearTimeout(Ge),Ge=void 0}function ln(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function sn(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}var V="Sortable"+new Date().getTime();function oo(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(m(a,"display")==="none"||a===_.ghost)){t.push({target:a,rect:N(a)});var r=oe({},t[t.length-1].rect);if(a.thisAnimationDuration){var i=Te(a,!0);i&&(r.top-=i.f,r.left-=i.e)}a.fromRect=r}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(eo(t,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,i=0;t.forEach(function(s){var u=0,l=s.target,f=l.fromRect,c=N(l),h=l.prevFromRect,E=l.prevToRect,b=s.rect,S=Te(l,!0);S&&(c.top-=S.f,c.left-=S.e),l.toRect=c,l.thisAnimationDuration&&dt(h,c)&&!dt(f,c)&&(b.top-c.top)/(b.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(u=ro(b,h,E,a.options)),dt(c,f)||(l.prevFromRect=f,l.prevToRect=c,u||(u=a.options.animation),a.animate(l,b,c,u)),u&&(r=!0,i=Math.max(i,u),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},u),l.thisAnimationDuration=u)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),t=[]},animate:function(n,a,r,i){if(i){m(n,"transition",""),m(n,"transform","");var s=Te(this.el),u=s&&s.a,l=s&&s.d,f=(a.left-r.left)/(u||1),c=(a.top-r.top)/(l||1);n.animatingX=!!f,n.animatingY=!!c,m(n,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=ao(n),m(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),m(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){m(n,"transition",""),m(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function ao(t){return t.offsetWidth}function ro(t,e,o,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*n.animation}var Ee=[],ft={initializeByDefault:!0},Be={mount:function(e){for(var o in ft)ft.hasOwnProperty(o)&&!(o in e)&&(e[o]=ft[o]);Ee.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ee.push(e)},pluginEvent:function(e,o,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var r=e+"Global";Ee.forEach(function(i){o[i.pluginName]&&(o[i.pluginName][r]&&o[i.pluginName][r](oe({sortable:o},n)),o.options[i.pluginName]&&o[i.pluginName][e]&&o[i.pluginName][e](oe({sortable:o},n)))})},initializePlugins:function(e,o,n,a){Ee.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var l=new s(e,o,e.options);l.sortable=e,l.options=e.options,e[u]=l,le(n,l.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var i=this.modifyOption(e,r,e.options[r]);typeof i<"u"&&(e.options[r]=i)}},getEventProperties:function(e,o){var n={};return Ee.forEach(function(a){typeof a.eventProperties=="function"&&le(n,a.eventProperties.call(o[a.pluginName],e))}),n},modifyOption:function(e,o,n){var a;return Ee.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[o]=="function"&&(a=r.optionListeners[o].call(e[r.pluginName],n))}),a}};function io(t){var e=t.sortable,o=t.rootEl,n=t.name,a=t.targetEl,r=t.cloneEl,i=t.toEl,s=t.fromEl,u=t.oldIndex,l=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,h=t.originalEvent,E=t.putSortable,b=t.extraEventProperties;if(e=e||o&&o[V],!!e){var S,F=e.options,B="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!se&&!Xe?S=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(n,!0,!0)),S.to=i||o,S.from=s||o,S.item=a||o,S.clone=r,S.oldIndex=u,S.newIndex=l,S.oldDraggableIndex=f,S.newDraggableIndex=c,S.originalEvent=h,S.pullMode=E?E.lastPutMode:void 0;var T=oe(oe({},b),Be.getEventProperties(n,e));for(var j in T)S[j]=T[j];o&&o.dispatchEvent(S),F[B]&&F[B].call(e,S)}}var lo=["evt"],X=function(e,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,r=Qn(n,lo);Be.pluginEvent.bind(_)(e,o,oe({dragEl:d,parentEl:P,ghostEl:y,rootEl:I,nextEl:be,lastDownEl:Ke,cloneEl:x,cloneHidden:fe,dragStarted:Me,putSortable:R,activeSortable:_.active,originalEvent:a,oldIndex:Ce,oldDraggableIndex:je,newIndex:U,newDraggableIndex:de,hideGhostForTarget:fn,unhideGhostForTarget:pn,cloneNowHidden:function(){fe=!0},cloneNowShown:function(){fe=!1},dispatchSortableEvent:function(s){$({sortable:o,name:s,originalEvent:a})}},r))};function $(t){io(oe({putSortable:R,cloneEl:x,targetEl:d,rootEl:I,oldIndex:Ce,oldDraggableIndex:je,newIndex:U,newDraggableIndex:de},t))}var d,P,y,I,be,Ke,x,fe,Ce,U,je,de,Ye,R,De=!1,ot=!1,at=[],_e,Q,pt,ht,Wt,Xt,Me,Se,$e,We=!1,Ue=!1,Qe,G,gt=[],yt=!1,rt=[],st=typeof document<"u",Le=tn,Bt=Xe||se?"cssFloat":"float",so=st&&!nn&&!tn&&"draggable"in document.createElement("div"),un=function(){if(st){if(se)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),cn=function(e,o){var n=m(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Oe(e,0,o),i=Oe(e,1,o),s=r&&m(r),u=i&&m(i),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+N(r).width,f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+N(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return i&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||l>=a&&n[Bt]==="none"||i&&n[Bt]==="none"&&l+f>a)?"vertical":"horizontal"},uo=function(e,o,n){var a=n?e.left:e.top,r=n?e.right:e.bottom,i=n?e.width:e.height,s=n?o.left:o.top,u=n?o.right:o.bottom,l=n?o.width:o.height;return a===s||r===u||a+i/2===s+l/2},co=function(e,o){var n;return at.some(function(a){var r=a[V].options.emptyInsertThreshold;if(!(!r||Ot(a))){var i=N(a),s=e>=i.left-r&&e<=i.right+r,u=o>=i.top-r&&o<=i.bottom+r;if(s&&u)return n=a}}),n},dn=function(e){function o(r,i){return function(s,u,l,f){var c=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(r==null&&(i||c))return!0;if(r==null||r===!1)return!1;if(i&&r==="clone")return r;if(typeof r=="function")return o(r(s,u,l,f),i)(s,u,l,f);var h=(i?s:u).options.group.name;return r===!0||typeof r=="string"&&r===h||r.join&&r.indexOf(h)>-1}}var n={},a=e.group;(!a||qe(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=o(a.pull,!0),n.checkPut=o(a.put),n.revertClone=a.revertClone,e.group=n},fn=function(){!un&&y&&m(y,"display","none")},pn=function(){!un&&y&&m(y,"display","")};st&&!nn&&document.addEventListener("click",function(t){if(ot)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ot=!1,!1},!0);var ve=function(e){if(d){e=e.touches?e.touches[0]:e;var o=co(e.clientX,e.clientY);if(o){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=o,n.preventDefault=void 0,n.stopPropagation=void 0,o[V]._onDragOver(n)}}},fo=function(e){d&&d.parentNode[V]._isOutsideThisEl(e.target)};function _(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=le({},e),t[V]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_.supportPointer!==!1&&"PointerEvent"in window&&!Re,emptyInsertThreshold:5};Be.initializePlugins(this,t,o);for(var n in o)!(n in e)&&(e[n]=o[n]);dn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:so,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?C(t,"pointerdown",this._onTapStart):(C(t,"mousedown",this._onTapStart),C(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(C(t,"dragover",this),C(t,"dragenter",this)),at.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),le(this,oo())}_.prototype={constructor:_,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Se=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,d):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,n=this.el,a=this.options,r=a.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,f=a.filter;if(yo(n),!d&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||a.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Re&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ee(u,a.draggable,n,!1),!(u&&u.animated)&&Ke!==u)){if(Ce=q(u),je=q(u,a.draggable),typeof f=="function"){if(f.call(this,e,u,this)){$({sortable:o,rootEl:l,name:"filter",targetEl:u,toEl:n,fromEl:n}),X("filter",o,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=ee(l,c.trim(),n,!1),c)return $({sortable:o,rootEl:c,name:"filter",targetEl:u,fromEl:n,toEl:n}),X("filter",o,{evt:e}),!0}),f)){r&&e.cancelable&&e.preventDefault();return}a.handle&&!ee(l,a.handle,n,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,o,n){var a=this,r=a.el,i=a.options,s=r.ownerDocument,u;if(n&&!d&&n.parentNode===r){var l=N(n);if(I=r,d=n,P=d.parentNode,be=d.nextSibling,Ke=n,Ye=i.group,_.dragged=d,_e={target:d,clientX:(o||e).clientX,clientY:(o||e).clientY},Wt=_e.clientX-l.left,Xt=_e.clientY-l.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,d.style["will-change"]="all",u=function(){if(X("delayEnded",a,{evt:e}),_.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Rt&&a.nativeDraggable&&(d.draggable=!0),a._triggerDragStart(e,o),$({sortable:a,name:"choose",originalEvent:e}),Y(d,i.chosenClass,!0)},i.ignore.split(",").forEach(function(f){an(d,f.trim(),mt)}),C(s,"dragover",ve),C(s,"mousemove",ve),C(s,"touchmove",ve),C(s,"mouseup",a._onDrop),C(s,"touchend",a._onDrop),C(s,"touchcancel",a._onDrop),Rt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),X("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(Xe||se))){if(_.eventCanceled){this._onDrop();return}C(s,"mouseup",a._disableDelayedDrag),C(s,"touchend",a._disableDelayedDrag),C(s,"touchcancel",a._disableDelayedDrag),C(s,"mousemove",a._delayedDragTouchMoveHandler),C(s,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&C(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(u,i.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&mt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._disableDelayedDrag),D(e,"touchend",this._disableDelayedDrag),D(e,"touchcancel",this._disableDelayedDrag),D(e,"mousemove",this._delayedDragTouchMoveHandler),D(e,"touchmove",this._delayedDragTouchMoveHandler),D(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?C(document,"pointermove",this._onTouchMove):o?C(document,"touchmove",this._onTouchMove):C(document,"mousemove",this._onTouchMove):(C(d,"dragend",this),C(I,"dragstart",this._onDragStart));try{document.selection?Je(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(De=!1,I&&d){X("dragStarted",this,{evt:o}),this.nativeDraggable&&C(document,"dragover",fo);var n=this.options;!e&&Y(d,n.dragClass,!1),Y(d,n.ghostClass,!0),_.active=this,e&&this._appendGhost(),$({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(Q){this._lastX=Q.clientX,this._lastY=Q.clientY,fn();for(var e=document.elementFromPoint(Q.clientX,Q.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Q.clientX,Q.clientY),e!==o);)o=e;if(d.parentNode[V]._isOutsideThisEl(e),o)do{if(o[V]){var n=void 0;if(n=o[V]._onDragOver({clientX:Q.clientX,clientY:Q.clientY,target:e,rootEl:o}),n&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);pn()}},_onTouchMove:function(e){if(_e){var o=this.options,n=o.fallbackTolerance,a=o.fallbackOffset,r=e.touches?e.touches[0]:e,i=y&&Te(y,!0),s=y&&i&&i.a,u=y&&i&&i.d,l=Le&&G&&$t(G),f=(r.clientX-_e.clientX+a.x)/(s||1)+(l?l[0]-gt[0]:0)/(s||1),c=(r.clientY-_e.clientY+a.y)/(u||1)+(l?l[1]-gt[1]:0)/(u||1);if(!_.active&&!De){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(y){i?(i.e+=f-(pt||0),i.f+=c-(ht||0)):i={a:1,b:0,c:0,d:1,e:f,f:c};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");m(y,"webkitTransform",h),m(y,"mozTransform",h),m(y,"msTransform",h),m(y,"transform",h),pt=f,ht=c,Q=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!y){var e=this.options.fallbackOnBody?document.body:I,o=N(d,!0,Le,!0,e),n=this.options;if(Le){for(G=e;m(G,"position")==="static"&&m(G,"transform")==="none"&&G!==document;)G=G.parentNode;G!==document.body&&G!==document.documentElement?(G===document&&(G=ne()),o.top+=G.scrollTop,o.left+=G.scrollLeft):G=ne(),gt=$t(G)}y=d.cloneNode(!0),Y(y,n.ghostClass,!1),Y(y,n.fallbackClass,!0),Y(y,n.dragClass,!0),m(y,"transition",""),m(y,"transform",""),m(y,"box-sizing","border-box"),m(y,"margin",0),m(y,"top",o.top),m(y,"left",o.left),m(y,"width",o.width),m(y,"height",o.height),m(y,"opacity","0.8"),m(y,"position",Le?"absolute":"fixed"),m(y,"zIndex","100000"),m(y,"pointerEvents","none"),_.ghost=y,e.appendChild(y),m(y,"transform-origin",Wt/parseInt(y.style.width)*100+"% "+Xt/parseInt(y.style.height)*100+"%")}},_onDragStart:function(e,o){var n=this,a=e.dataTransfer,r=n.options;if(X("dragStart",this,{evt:e}),_.eventCanceled){this._onDrop();return}X("setupClone",this),_.eventCanceled||(x=sn(d),x.removeAttribute("id"),x.draggable=!1,x.style["will-change"]="",this._hideClone(),Y(x,this.options.chosenClass,!1),_.clone=x),n.cloneId=Je(function(){X("clone",n),!_.eventCanceled&&(n.options.removeCloneOnHide||I.insertBefore(x,d),n._hideClone(),$({sortable:n,name:"clone"}))}),!o&&Y(d,r.dragClass,!0),o?(ot=!0,n._loopId=setInterval(n._emulateDragOver,50)):(D(document,"mouseup",n._onDrop),D(document,"touchend",n._onDrop),D(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(n,a,d)),C(document,"drop",n),m(d,"transform","translateZ(0)")),De=!0,n._dragStartId=Je(n._dragStarted.bind(n,o,e)),C(document,"selectstart",n),Me=!0,Re&&m(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,n=e.target,a,r,i,s=this.options,u=s.group,l=_.active,f=Ye===u,c=s.sort,h=R||l,E,b=this,S=!1;if(yt)return;function F(Ne,vn){X(Ne,b,oe({evt:e,isOwner:f,axis:E?"vertical":"horizontal",revert:i,dragRect:a,targetRect:r,canSort:c,fromSortable:h,target:n,completed:T,onMove:function(Pt,bn){return Ve(I,o,d,a,Pt,N(Pt),e,bn)},changed:j},vn))}function B(){F("dragOverAnimationCapture"),b.captureAnimationState(),b!==h&&h.captureAnimationState()}function T(Ne){return F("dragOverCompleted",{insertion:Ne}),Ne&&(f?l._hideClone():l._showClone(b),b!==h&&(Y(d,R?R.options.ghostClass:l.options.ghostClass,!1),Y(d,s.ghostClass,!0)),R!==b&&b!==_.active?R=b:b===_.active&&R&&(R=null),h===b&&(b._ignoreWhileAnimating=n),b.animateAll(function(){F("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===d&&!d.animated||n===o&&!n.animated)&&(Se=null),!s.dragoverBubble&&!e.rootEl&&n!==document&&(d.parentNode[V]._isOutsideThisEl(e.target),!Ne&&ve(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function j(){U=q(d),de=q(d,s.draggable),$({sortable:b,name:"change",toEl:o,newIndex:U,newDraggableIndex:de,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=ee(n,s.draggable,o,!0),F("dragOver"),_.eventCanceled)return S;if(d.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||b._ignoreWhileAnimating===n)return T(!1);if(ot=!1,l&&!s.disabled&&(f?c||(i=P!==I):R===this||(this.lastPutMode=Ye.checkPull(this,l,d,e))&&u.checkPut(this,l,d,e))){if(E=this._getDirection(e,n)==="vertical",a=N(d),F("dragOverValid"),_.eventCanceled)return S;if(i)return P=I,B(),this._hideClone(),F("revert"),_.eventCanceled||(be?I.insertBefore(d,be):I.appendChild(d)),T(!0);var g=Ot(o,s.draggable);if(!g||mo(e,E,this)&&!g.animated){if(g===d)return T(!1);if(g&&o===e.target&&(n=g),n&&(r=N(n)),Ve(I,o,d,a,n,r,e,!!n)!==!1)return B(),g&&g.nextSibling?o.insertBefore(d,g.nextSibling):o.appendChild(d),P=o,j(),T(!0)}else if(g&&go(e,E,this)){var J=Oe(o,0,s,!0);if(J===d)return T(!1);if(n=J,r=N(n),Ve(I,o,d,a,n,r,e,!1)!==!1)return B(),o.insertBefore(d,J),P=o,j(),T(!0)}else if(n.parentNode===o){r=N(n);var Z=0,ge,Ie=d.parentNode!==o,z=!uo(d.animated&&d.toRect||a,n.animated&&n.toRect||r,E),xe=E?"top":"left",ue=jt(n,"top","top")||jt(d,"top","top"),Pe=ue?ue.scrollTop:void 0;Se!==n&&(ge=r[xe],We=!1,Ue=!z&&s.invertSwap||Ie),Z=_o(e,n,r,E,z?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ue,Se===n);var ae;if(Z!==0){var me=q(d);do me-=Z,ae=P.children[me];while(ae&&(m(ae,"display")==="none"||ae===y))}if(Z===0||ae===n)return T(!1);Se=n,$e=Z;var Ae=n.nextElementSibling,ce=!1;ce=Z===1;var ze=Ve(I,o,d,a,n,r,e,ce);if(ze!==!1)return(ze===1||ze===-1)&&(ce=ze===1),yt=!0,setTimeout(ho,30),B(),ce&&!Ae?o.appendChild(d):n.parentNode.insertBefore(d,ce?Ae:n),ue&&ln(ue,0,Pe-ue.scrollTop),P=d.parentNode,ge!==void 0&&!Ue&&(Qe=Math.abs(ge-N(n)[xe])),j(),T(!0)}if(o.contains(d))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){D(document,"mousemove",this._onTouchMove),D(document,"touchmove",this._onTouchMove),D(document,"pointermove",this._onTouchMove),D(document,"dragover",ve),D(document,"mousemove",ve),D(document,"touchmove",ve)},_offUpEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._onDrop),D(e,"touchend",this._onDrop),D(e,"pointerup",this._onDrop),D(e,"touchcancel",this._onDrop),D(document,"selectstart",this)},_onDrop:function(e){var o=this.el,n=this.options;if(U=q(d),de=q(d,n.draggable),X("drop",this,{evt:e}),P=d&&d.parentNode,U=q(d),de=q(d,n.draggable),_.eventCanceled){this._nulling();return}De=!1,Ue=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wt(this.cloneId),wt(this._dragStartId),this.nativeDraggable&&(D(document,"drop",this),D(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Re&&m(document.body,"user-select",""),m(d,"transform",""),e&&(Me&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),(I===P||R&&R.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),d&&(this.nativeDraggable&&D(d,"dragend",this),mt(d),d.style["will-change"]="",Me&&!De&&Y(d,R?R.options.ghostClass:this.options.ghostClass,!1),Y(d,this.options.chosenClass,!1),$({sortable:this,name:"unchoose",toEl:P,newIndex:null,newDraggableIndex:null,originalEvent:e}),I!==P?(U>=0&&($({rootEl:P,name:"add",toEl:P,fromEl:I,originalEvent:e}),$({sortable:this,name:"remove",toEl:P,originalEvent:e}),$({rootEl:P,name:"sort",toEl:P,fromEl:I,originalEvent:e}),$({sortable:this,name:"sort",toEl:P,originalEvent:e})),R&&R.save()):U!==Ce&&U>=0&&($({sortable:this,name:"update",toEl:P,originalEvent:e}),$({sortable:this,name:"sort",toEl:P,originalEvent:e})),_.active&&((U==null||U===-1)&&(U=Ce,de=je),$({sortable:this,name:"end",toEl:P,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){X("nulling",this),I=d=P=y=be=x=Ke=fe=_e=Q=Me=U=de=Ce=je=Se=$e=R=Ye=_.dragged=_.ghost=_.clone=_.active=null,rt.forEach(function(e){e.checked=!0}),rt.length=pt=ht=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":d&&(this._onDragOver(e),po(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,n=this.el.children,a=0,r=n.length,i=this.options;a<r;a++)o=n[a],ee(o,i.draggable,this.el,!1)&&e.push(o.getAttribute(i.dataIdAttr)||bo(o));return e},sort:function(e,o){var n={},a=this.el;this.toArray().forEach(function(r,i){var s=a.children[i];ee(s,this.options.draggable,a,!1)&&(n[r]=s)},this),o&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(a.removeChild(n[r]),a.appendChild(n[r]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return ee(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var n=this.options;if(o===void 0)return n[e];var a=Be.modifyOption(this,e,o);typeof a<"u"?n[e]=a:n[e]=o,e==="group"&&dn(n)},destroy:function(){X("destroy",this);var e=this.el;e[V]=null,D(e,"mousedown",this._onTapStart),D(e,"touchstart",this._onTapStart),D(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(D(e,"dragover",this),D(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),at.splice(at.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!fe){if(X("hideClone",this),_.eventCanceled)return;m(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),fe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(fe){if(X("showClone",this),_.eventCanceled)return;d.parentNode==I&&!this.options.group.revertClone?I.insertBefore(x,d):be?I.insertBefore(x,be):I.appendChild(x),this.options.group.revertClone&&this.animate(d,x),m(x,"display",""),fe=!1}}};function po(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ve(t,e,o,n,a,r,i,s){var u,l=t[V],f=l.options.onMove,c;return window.CustomEvent&&!se&&!Xe?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=o,u.draggedRect=n,u.related=a||e,u.relatedRect=r||N(e),u.willInsertAfter=s,u.originalEvent=i,t.dispatchEvent(u),f&&(c=f.call(l,u,i)),c}function mt(t){t.draggable=!1}function ho(){yt=!1}function go(t,e,o){var n=N(Oe(o.el,0,o.options,!0)),a=10;return e?t.clientX<n.left-a||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-a||t.clientY<n.bottom&&t.clientX<n.left}function mo(t,e,o){var n=N(Ot(o.el,o.options.draggable)),a=10;return e?t.clientX>n.right+a||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+a}function _o(t,e,o,n,a,r,i,s){var u=n?t.clientY:t.clientX,l=n?o.height:o.width,f=n?o.top:o.left,c=n?o.bottom:o.right,h=!1;if(!i){if(s&&Qe<l*a){if(!We&&($e===1?u>f+l*r/2:u<c-l*r/2)&&(We=!0),We)h=!0;else if($e===1?u<f+Qe:u>c-Qe)return-$e}else if(u>f+l*(1-a)/2&&u<c-l*(1-a)/2)return vo(e)}return h=h||i,h&&(u<f+l*r/2||u>c-l*r/2)?u>f+l/2?1:-1:0}function vo(t){return q(d)<q(t)?1:-1}function bo(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function yo(t){rt.length=0;for(var e=t.getElementsByTagName("input"),o=e.length;o--;){var n=e[o];n.checked&&rt.push(n)}}function Je(t){return setTimeout(t,0)}function wt(t){return clearTimeout(t)}st&&C(document,"touchmove",function(t){(_.active||De)&&t.cancelable&&t.preventDefault()});_.utils={on:C,off:D,css:m,find:an,is:function(e,o){return!!ee(e,o,e,!1)},extend:to,throttle:rn,closest:ee,toggleClass:Y,clone:sn,index:q,nextTick:Je,cancelNextTick:wt,detectDirection:cn,getChild:Oe};_.get=function(t){return t[V]};_.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(_.utils=oe(oe({},_.utils),n.utils)),Be.mount(n)})};_.create=function(t,e){return new _(t,e)};_.version=Jn;var A=[],ke,Et,St=!1,_t,vt,it,Fe;function wo(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(o){var n=o.originalEvent;this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):this.options.supportPointer?C(document,"pointermove",this._handleFallbackAutoScroll):n.touches?C(document,"touchmove",this._handleFallbackAutoScroll):C(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var n=o.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?D(document,"dragover",this._handleAutoScroll):(D(document,"pointermove",this._handleFallbackAutoScroll),D(document,"touchmove",this._handleFallbackAutoScroll),D(document,"mousemove",this._handleFallbackAutoScroll)),zt(),Ze(),no()},nulling:function(){it=Et=ke=St=Fe=_t=vt=null,A.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,n){var a=this,r=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,s=document.elementFromPoint(r,i);if(it=o,n||this.options.forceAutoScrollFallback||Xe||se||Re){bt(o,this.options,s,n);var u=he(s,!0);St&&(!Fe||r!==_t||i!==vt)&&(Fe&&zt(),Fe=setInterval(function(){var l=he(document.elementFromPoint(r,i),!0);l!==u&&(u=l,Ze()),bt(o,a.options,l,n)},10),_t=r,vt=i)}else{if(!this.options.bubbleScroll||he(s,!0)===ne()){Ze();return}bt(o,this.options,he(s,!1),!1)}}},le(t,{pluginName:"scroll",initializeByDefault:!0})}function Ze(){A.forEach(function(t){clearInterval(t.pid)}),A=[]}function zt(){clearInterval(Fe)}var bt=rn(function(t,e,o,n){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,u=ne(),l=!1,f;Et!==o&&(Et=o,Ze(),ke=e.scroll,f=e.scrollFn,ke===!0&&(ke=he(o,!0)));var c=0,h=ke;do{var E=h,b=N(E),S=b.top,F=b.bottom,B=b.left,T=b.right,j=b.width,g=b.height,J=void 0,Z=void 0,ge=E.scrollWidth,Ie=E.scrollHeight,z=m(E),xe=E.scrollLeft,ue=E.scrollTop;E===u?(J=j<ge&&(z.overflowX==="auto"||z.overflowX==="scroll"||z.overflowX==="visible"),Z=g<Ie&&(z.overflowY==="auto"||z.overflowY==="scroll"||z.overflowY==="visible")):(J=j<ge&&(z.overflowX==="auto"||z.overflowX==="scroll"),Z=g<Ie&&(z.overflowY==="auto"||z.overflowY==="scroll"));var Pe=J&&(Math.abs(T-a)<=i&&xe+j<ge)-(Math.abs(B-a)<=i&&!!xe),ae=Z&&(Math.abs(F-r)<=i&&ue+g<Ie)-(Math.abs(S-r)<=i&&!!ue);if(!A[c])for(var me=0;me<=c;me++)A[me]||(A[me]={});(A[c].vx!=Pe||A[c].vy!=ae||A[c].el!==E)&&(A[c].el=E,A[c].vx=Pe,A[c].vy=ae,clearInterval(A[c].pid),(Pe!=0||ae!=0)&&(l=!0,A[c].pid=setInterval(function(){n&&this.layer===0&&_.active._onTouchMove(it);var Ae=A[this.layer].vy?A[this.layer].vy*s:0,ce=A[this.layer].vx?A[this.layer].vx*s:0;typeof f=="function"&&f.call(_.dragged.parentNode[V],ce,Ae,t,it,A[this.layer].el)!=="continue"||ln(A[this.layer].el,ce,Ae)}.bind({layer:c}),24))),c++}while(e.bubbleScroll&&h!==u&&(h=he(h,!1)));St=l}},30),hn=function(e){var o=e.originalEvent,n=e.putSortable,a=e.dragEl,r=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var l=n||r;s();var f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,c=document.elementFromPoint(f.clientX,f.clientY);u(),l&&!l.el.contains(c)&&(i("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function It(){}It.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Oe(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(o,a):this.sortable.el.appendChild(o),this.sortable.animateAll(),n&&n.animateAll()},drop:hn};le(It,{pluginName:"revertOnSpill"});function xt(){}xt.prototype={onSpill:function(e){var o=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),a.animateAll()},drop:hn};le(xt,{pluginName:"removeOnSpill"});_.mount(new wo);_.mount(xt,It);const Eo={sort:!0,delay:0,delayOnTouchOnly:!1,touchStartThreshold:0,disabled:!1,store:null,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",preventOnFilter:!0,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:1,direction:"horizontal",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,dragoverBubble:!1,removeCloneOnHide:!0,emptyInsertThreshold:5};function So(t){t.parentNode&&t.parentNode.removeChild(t)}function Do(t){return/^[a-z][a-z0-9]*$/.test(t)}const Yt=Symbol("dragData"),gn=["setData","chooseData","onChoose","onUnchoose","onStart","onEnd","onAdd","onUpdate","onSort","onRemove","onFilter","onMove","onClone","onChange"],Co=gn.reduce((t,e)=>(t[e]=Function,t),{});function To({props:t,emit:e}){const o=pe(),{modelValue:n}=et(t),a=pe();function r(){p(a)&&p(a).destroy();const i=Cn()?.vnode.el,s={onAdd(l){const{pullMode:f,newIndex:c}=l;if(f){const h=we(n.value),E=l.item[Yt];h.splice(c,0,E),So(l.item),e("update:modelValue",h)}},onRemove(l){const{pullMode:f}=l;if(f===!0){const c=we(n.value);c.splice(l.oldIndex,1),e("update:modelValue",c)}},onEnd(l){const{pullMode:f,oldIndex:c,newIndex:h}=l;if(!f){const E=we(n.value),b=E.splice(c,1);E.splice(h,0,...b),e("update:modelValue",E)}}},u=gn.filter(l=>t[l]).reduce((l,f)=>(l[f]=t[f],l),{});a.value=new _(i,{...Eo,...t.config,...s,...u,onChoose(l){let c=we(n.value)[l.oldIndex];u.chooseData&&(c=u.chooseData(c,l.oldIndex)),l.item[Yt]=c}})}return[o,{init:r,sortableInstance:a}]}const mn=H({name:"LDraggable",props:{modelValue:{type:Array,required:!0,default:()=>[]},tag:{type:String,required:!1,default:"div"},config:{type:Object,required:!1,default:void 0},...Co},emits:["update:modelValue"],setup(t,{slots:e,emit:o,attrs:n,expose:a}){const{tag:r}=t,i=Do(r);let s=r;i||(s=M(r));const[u,{init:l,sortableInstance:f}]=To({props:t,emit:o});return Dt(()=>{l()}),a({getInstance:()=>p(f)}),()=>{const{modelValue:c}=t;let h=i?e.empty?.():()=>e.empty?.();return c.length&&(h=i?e.default?.():()=>e.default?.()),k(s,{...n,ref:u},h)}}}),Oo={class:"components-title"},Io=H({name:"LeftPanel",inheritAttrs:!0}),xo=H({...Io,setup(t){const e=pe([]);Dt(async()=>{e.value=await Xn()});const o=({icon:n})=>{const a=Bn(n);return a.__uuid__=Ct(),a.__vModel__=Tt(`${n}-`),a.__layout__.span=3,we(a)};return(n,a)=>{const r=M("svg-icon");return O(!0),W(K,null,re(p(e),(i,s)=>(O(),W("section",{key:s,class:"components-panel"},[L("div",Oo,[v(r,{class:"svg-icon-r",name:"component"}),L("span",null,tt(i.title),1)]),v(p(mn),{modelValue:i.list,"onUpdate:modelValue":u=>i.list=u,class:"components-draggable",config:{group:{name:p(en),pull:"clone",put:!1,revertClone:!0},sort:!1},"choose-data":o},{default:w(()=>[(O(!0),W(K,null,re(i.list,u=>(O(),W("div",{key:u.__uuid__,class:"lc-draggable"},[v(r,{name:u.icon},null,8,["name"]),L("span",null,tt(u.text),1)]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","config"])]))),128)}}});const Po=lt(xo,[["__scopeId","data-v-6b1677cc"]]),Ao=[{value:"small",label:"较小"},{value:"medium",label:"中等"},{value:"large",label:"较大"}],No=[{value:"left",label:"左置"},{value:"top",label:"上置"}],Mo=[{value:"left",label:"左对齐"},{value:"right",label:"右对齐"}],ko=["px","em"],Ut={RadioGroup(t){const{type:e,options:o,space:n}=t,a=e==="button",r=M(a?"n-radio-button":"n-radio"),i=M("n-space");return a?o.map(s=>k(r,s)):k(i,n,()=>o.map(s=>k(r,s)))}},Lt=H({name:"WidgetItem",props:{field:{type:Object,default:()=>({})},model:{type:Object,default:()=>({})}},setup(t){return{FormItem:M("n-form-item"),getFieldValue:a=>{const{model:r}=t;return a.includes(".")?a.split(".").reduce((u,l)=>u?.[l],r):t?.model?.[a]},setFieldValue:(a,r)=>{const{model:i}=et(t);if(a.includes(".")){const s=a.split("."),[u,...l]=s.reverse(),f=l.reverse().reduce((c,h)=>c[h],i.value);f[u]=r}else i&&i.value&&(i.value[a]=r)}}},render(t){const{FormItem:e,getFieldValue:o,setFieldValue:n,field:a}=t,r=M(a.component),i=Ut[r.name]&&Ut[r.name](a.slot);return k(e,{label:a.label,path:a.path,"label-placement":"left"},()=>k(r,{...a.props,value:o(a.path),"onUpdate:value":s=>{n(a.path,s)}},()=>i))}}),Fo=L("div",null,"Java",-1),Ro=H({name:"WidgetSetting",inheritAttrs:!0}),Go=H({...Ro,props:{widget:{default:void 0}},setup(t){const e=t,{common:o}=Mt,n=Kt(()=>{const{tagType:a}=e.widget;return Mt[a]});return console.log("fields-Config",e.widget,n.value),(a,r)=>{const i=Tn,s=On,u=Qt;return O(),te(u,{class:"widget-setting",model:e.widget},{default:w(()=>[v(s,{"default-expanded-names":"extendConfig",accordion:""},{default:w(()=>[v(i,{title:"基础属性",name:"commonConfig"},{default:w(()=>[(O(!0),W(K,null,re(p(o),l=>(O(),te(p(Lt),{key:l.label,field:l,model:e.widget},null,8,["field","model"]))),128))]),_:1}),v(i,{title:"高级属性",name:"extendConfig"},{default:w(()=>[(O(!0),W(K,null,re(p(n),l=>(O(),te(p(Lt),{key:l.label,field:l,model:e.widget},null,8,["field","model"]))),128))]),_:1}),v(i,{title:"校验规则",name:"3"},{default:w(()=>[Fo]),_:1})]),_:1}),ye(" "+tt(a.widget),1)]),_:1},8,["model"])}}}),jo={class:"right-tab"},$o={class:"right-content"},Wo=H({name:"RightPanel",inheritAttrs:!0}),Xo=H({...Wo,props:{designer:{default:void 0},form:{},widget:{default:void 0}},setup(t){const e=t,o={widget:"组件属性",form:"表单属性"},n=pe("widget"),{form:a,widget:r}=et(e),i=ko.map(u=>({label:u,value:u})),s=Kt({get(){return e.form.fromGrid.xGap},set(u){const{fromGrid:l}=et(e.form);l.value.xGap=l.value.yGap=u}});return(u,l)=>{const f=In,c=xn,h=Jt,E=Pn,b=An,S=Nn,F=Mn,B=zn,T=kn,j=Zt;return O(),W(K,null,[L("div",jo,[v(c,{value:p(n),"onUpdate:value":l[0]||(l[0]=g=>ut(n)?n.value=g:null),"justify-content":"space-evenly",type:"line"},{default:w(()=>[(O(),W(K,null,re(o,(g,J)=>v(f,{key:J,name:J},{default:w(()=>[ye(tt(g),1)]),_:2},1032,["name"])),64))]),_:1},8,["value"])]),v(j,{class:"app-panel"},{default:w(()=>[L("div",$o,[p(n)==="widget"?(O(),W(K,{key:0},[p(r)?(O(),te(Go,{key:0,widget:p(r),"onUpdate:widget":l[1]||(l[1]=g=>ut(r)?r.value=g:null)},null,8,["widget"])):(O(),te(h,{key:1,size:"huge",description:"未选择控件"}))],64)):At("",!0),p(n)==="form"?(O(),W(K,{key:1},[v(b,{label:"表单名称","label-placement":"left"},{default:w(()=>[v(E,{value:p(a).name,"onUpdate:value":l[2]||(l[2]=g=>p(a).name=g)},null,8,["value"])]),_:1}),v(b,{label:"表单尺寸","label-placement":"left"},{default:w(()=>[v(F,{value:p(a).fromGlobal.size,"onUpdate:value":l[3]||(l[3]=g=>p(a).fromGlobal.size=g),name:"radiobuttongroup1"},{default:w(()=>[(O(!0),W(K,null,re(p(Ao),g=>(O(),te(S,{key:g.value,value:g.value,label:g.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),v(b,{label:"标签位置","label-placement":"left"},{default:w(()=>[v(F,{value:p(a).fromGlobal.labelPlacement,"onUpdate:value":l[4]||(l[4]=g=>p(a).fromGlobal.labelPlacement=g),name:"radiobuttongroup1"},{default:w(()=>[(O(!0),W(K,null,re(p(No),g=>(O(),te(S,{key:g.value,value:g.value,label:g.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),v(b,{label:"标签对齐","label-placement":"left"},{default:w(()=>[v(F,{value:p(a).fromGlobal.labelAlign,"onUpdate:value":l[5]||(l[5]=g=>p(a).fromGlobal.labelAlign=g),name:"radiobuttongroup1"},{default:w(()=>[(O(!0),W(K,null,re(p(Mo),g=>(O(),te(S,{key:g.value,value:g.value,label:g.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),v(b,{label:"标签宽度","label-placement":"left"},{default:w(()=>[v(B,{value:p(a).fromGlobal.labelWidth,"onUpdate:value":l[6]||(l[6]=g=>p(a).fromGlobal.labelWidth=g),options:p(i)},null,8,["value","options"])]),_:1}),v(b,{label:"栅格间隔","label-placement":"left"},{default:w(()=>[v(T,{value:p(s),"onUpdate:value":l[7]||(l[7]=g=>ut(s)?s.value=g:null),"button-placement":"both",precision:0,step:"1",max:"999"},null,8,["value"])]),_:1})],64)):At("",!0)])]),_:1})],64)}}});const Bo=lt(Xo,[["__scopeId","data-v-c89ee7fb"]]),zo={cols:24,xGap:12,yGap:12},Yo={size:"medium",labelPlacement:"left",labelAlign:"left"},Uo=()=>{const t=pe(),e=pe({}),o=pe(),n=pe({name:"",fromGrid:zo,fromGlobal:Yo,items:[]}),a=new Yn(50),r={undo(){const i=a.go(-1);n.value.items=i},redo(){const i=a.go(1);n.value.items=i},preview(){console.log("preview-add",a,a.step)},empty(){n.value.items.length&&(n.value.items=[],r.storage())},save(){console.log("widgets-Config",e.value,n.value)},getActiveWidget(){return o},setActiveWidget(i){o.value=i},copyWidget(i){const s={...i,__uuid__:Ct(),__vModel__:Tt(i.tag)};n.value.items.push(s)},deleteWidget(i){n.value.items.splice(i,1),r.storage()},storage(){a.push(n.value.items)}};return[r,{formData:e,formConfig:n,elFormRef:t,activeWidget:o}]},Lo={default(t){const{default:{options:e,space:o}}=t.__slot__,n=M("n-checkbox"),a=M("n-space");return k(a,o,()=>e.map(r=>k(n,r)))}},Vo=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"})),Ho={default(t,e){const{default:o,preLabel:n,sufLabel:a}=t.__slot__,r=M("n-input"),i=M("n-input-group-label"),s=M("NIcon"),u={};Object.keys(o).forEach(f=>{const c=o[f];if(c){const h=M(c);u[f]=()=>k(s,{component:h})}});const l=[k(r,e,u)];return n&&l.unshift(k(i,()=>n)),a&&l.push(k(i,()=>a)),l}},qo=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Ko={prefix(t,e){return t.__slot__[e]},suffix(t,e){return t.__slot__[e]},"add-icon"(t,e){return t.__slot__[e]},"minu-icon"(t,e){return t.__slot__[e]}},Qo=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Jo={prefix(t,e){const o=M("NIcon"),n=M(t.__slot__[e]);return k(o,{component:n})},suffix(t,e){const o=M("NIcon");return k(o,{component:M(t.__slot__[e])})}},Zo=Object.freeze(Object.defineProperty({__proto__:null,default:Jo},Symbol.toStringTag,{value:"Module"})),ea={default(t){const{default:{type:e,options:o,space:n}}=t.__slot__,a=e==="button",r=M(a?"n-radio-button":"n-radio"),i=M("n-space");return a?o.map(s=>k(r,s)):k(i,n,()=>o.map(s=>k(r,s)))}},ta=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),na={default(t,e){return t.__slot__[e]}},oa=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),aa={thumb(t,e){return t.__slot__[e]}},ra=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"})),ia={checked(t,e){return t.__slot__[e]},unchecked(t,e){return t.__slot__[e]},icon(t,e){return t.__slot__[e]},"checked-icon"(t,e){return t.__slot__[e]},"unchecked-icon"(t,e){return t.__slot__[e]}},la=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"}));function sa(t){const e=t.split("/").at(-1),o=t.split(e).at(0),[n,...a]=e.split(".").reverse();return{dir:o,base:e,ext:`.${n}`,name:a.reverse().join(".")}}const _n={},Vt=Object.assign({"./n-checkbox-group.ts":Vo,"./n-input-group.ts":qo,"./n-input-number.ts":Qo,"./n-input.ts":Zo,"./n-radio-group.ts":ta,"./n-rate.ts":oa,"./n-slider.ts":ra,"./n-switch.ts":la});Object.keys(Vt).forEach(t=>{const e=Vt[t].default||{},{name:o}=sa(t);_n[o]=e});function ua(t,e){const{tag:o,__slot__:n}=t,a=_n[o],r={};return o==="n-input-group"?()=>a.default(t,e):(a&&(a.default&&n.default&&(r.default=()=>a.default(t,e)),Object.keys(a).forEach(i=>{const s=a[i];n&&n[i]&&(r[i]=()=>s(t,i))})),r)}const ca=H({name:"LcFormItem",props:{value:{type:[String,Number,Object,Boolean],required:!1,default:void 0},conf:{type:Object,required:!0}},emits:["update:value"],setup(t,{attrs:e,emit:o}){return()=>{const{__config__:n,tag:a}=t.conf||{},r=M(a),i=He({value:t.value,"onUpdate:value":u=>{o("update:value",u)}},n,e),s=ua(t.conf,i);return k(r,i,s)}}}),da=t=>($n("data-v-e43a6ddf"),t=t(),Wn(),t),fa={class:"app-left"},pa=da(()=>L("div",{class:"left-logo"},"表单设计器",-1)),ha={class:"app-center"},ga={class:"form-tool"},ma=["onClick"],_a=["onClick"],va={class:"app-right"},ba=H({name:"PageEditor",inheritAttrs:!0}),ya=H({...ba,setup(t){const e={group:{name:kt,pull:!0,put:[en,kt]}},[o,{formData:n,formConfig:a,elFormRef:r,activeWidget:i}]=Uo(),s=l=>{a.value.items=l,o.storage()},u=()=>{a.value.fromGrid.xGap=24};return Dt(()=>{a.value.items=Object.keys(ct).map(l=>({...ct[l],__uuid__:Ct(),__vModel__:Tt(ct[l].tag+Math.random().toString(36).replace(".",""))})),o.storage()}),(l,f)=>{const c=Zt,h=qt,E=Rn,b=Jt,S=Gn,F=Qt,B=jn;return O(),te(B,{class:"app-container",tag:"section"},{default:w(()=>[L("div",fa,[pa,v(c,{class:"app-panel left-panel"},{default:w(()=>[v(Po)]),_:1})]),L("div",ha,[v(Hn,{designer:p(o),onOnEmpty:u},null,8,["designer"]),v(c,{class:"app-panel"},{default:w(()=>[v(F,He({ref_key:"elFormRef",ref:r},p(a).fromGlobal,{model:p(n)}),{default:w(()=>[v(p(mn),He(p(a).fromGrid,{"model-value":p(a).items,config:e,tag:"NGrid",class:"center-editor","onUpdate:modelValue":s}),{empty:w(()=>[v(S,{span:24,class:"center-empty",draggable:"false"},{default:w(()=>[v(b,{size:"huge",description:"从左侧选择控件进行表单设计"})]),_:1})]),default:w(()=>[(O(!0),W(K,null,re(p(a).items,(T,j)=>(O(),te(E,He({key:T.__uuid__},T.__layout__,{label:T.label,"show-feedback":!1,class:["center-row",{on:p(i)?.__uuid__===T.__uuid__}],onClick:g=>p(o).setActiveWidget(T)}),{default:w(()=>[v(p(ca),{value:p(n)[T.__vModel__],"onUpdate:value":g=>p(n)[T.__vModel__]=g,conf:T},null,8,["value","onUpdate:value","conf"]),L("div",ga,[L("span",{class:"form-tool-btn icon-copy",onClick:Nt(g=>p(o).copyWidget(T),["stop"])},[v(h,{size:"16",component:p(Fn)},null,8,["component"])],8,ma),L("span",{class:"form-tool-btn icon-delete",onClick:Nt(g=>p(o).deleteWidget(j),["stop"])},[v(h,{size:"16",component:p(Ht)},null,8,["component"])],8,_a)])]),_:2},1040,["label","class","onClick"]))),128))]),_:1},16,["model-value"])]),_:1},16,["model"])]),_:1})]),L("div",va,[v(Bo,{designer:p(o),widget:p(i),form:p(a)},null,8,["designer","widget","form"])])]),_:1})}}});const Da=lt(ya,[["__scopeId","data-v-e43a6ddf"]]);export{Da as default};
