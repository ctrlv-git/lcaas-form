import{aR as se,u as f,d as N,ay as G,r as U,aC as Ie,aF as X,ax as ne,o as C,c as Y,w as v,a as m,aS as $n,aT as Rn,aG as I,aH as R,aU as q,aI as M,aV as Fn,aA as me,aW as Gn,aX as Un,aY as ln,aD as ke,aZ as Wt,T as Se,au as Wn,v as Ae,aK as Pt,a_ as jn,a5 as rn,az as rt,a$ as zn,aP as sn,aB as Ot,b0 as Mt,aL as ft,aM as pt,b1 as Xn,ag as Bn,P as mt,U as _t,I as un,b2 as Vn,ar as Ln,V as Yn,b3 as Hn,b4 as qn,aj as Zn,av as Kn,b5 as Qn,b6 as Jn,b7 as eo,O as cn,aE as jt,b8 as to,aq as no,b9 as dn,ab as oo,ac as ao,X as lo,ba as zt,bb as ro,Q as io,S as so,M as uo}from"./vendor-bfdd7a88.js";import{_ as De,g as co,r as fn,a as fo,b as pn,c as mn,t as po,f as Xt,d as mo,e as _o,h as Bt}from"./index-087f570b.js";class go{step=0;max=0;#e=[];constructor(e=100){this.max=e??100}get value(){return this.#e[this.step-1]}set value(e){this.push(se(e))}undo(){return this.go(-1)}redo(){return this.go(1)}go(e){return e=this.step+e,e=Math.max(0,Math.min(e,this.max,this.#e.length)),this.step=e,this.#e[this.step-1]}empty(){this.step=0,this.#e=[]}push(e){this.#e.length=this.step,this.#e.length>=this.max?this.#e.shift():this.step+=1,this.#e.push(se(e))}}const ho={cols:24,xGap:12,yGap:12},vo={size:"medium",labelPlacement:"left",labelAlign:"left",requireMarkPlacement:"right-hanging"},bo=[{value:"small",label:"较小"},{value:"medium",label:"中等"},{value:"large",label:"较大"}],yo=[{value:"left",label:"左置"},{value:"top",label:"上置"}],wo=[{value:"left",label:"左对齐"},{value:"right",label:"右对齐"}],Eo=["px","em"],So=[{value:"left",label:"左侧"},{value:"right",label:"右侧"},{value:"right-hanging",label:"右侧悬挂"}],Do=[{value:"/^[-]?\\d+(\\.\\d+)?$/",label:"数字"},{value:"/^[A-Za-z]+$/",label:"字母"},{value:"/^[A-Za-z0-9]+$/",label:"数字字母"},{value:"/^[1][0-9]{10}$/",label:"手机号码"},{value:"/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/",label:"邮箱"},{value:"/^https?://(([a-zA-Z0-9_-])+(.)?)*(:d+)?(/((.)?(?)?=?&?[a-zA-Z0-9_-](?)?)*)*$/i",label:"网址"},{value:"/^[^一-龥]+$/",label:"非中文字符"},{value:"/^[一-龥]+$/",label:"仅中文字符"}],Co={default(t){const{default:{options:e,space:o}}=t.__slot__,n=U("n-checkbox"),a=U("n-space");return G(a,o,()=>e.map(l=>G(n,l)))}},To=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Oo={default(t,e){const{default:o,preLabel:n,sufLabel:a}=t.__slot__,l=U("n-input"),r=U("n-input-group-label"),s=U("NIcon"),u={};Object.keys(o).forEach(d=>{const c=o[d];if(c){const _=U(c);u[d]=()=>G(s,{component:_})}});const i=[G(l,e,u)];return n&&i.unshift(G(r,()=>n)),a&&i.push(G(r,()=>a)),i}},xo=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Ze=(t,e)=>{const o=t.__slot__[e],n=U("NIcon"),a=U(o);return G(n,{component:a})},Io={prefix(t,e){return Ze(t,e)},suffix(t,e){return Ze(t,e)},"add-icon"(t,e){return Ze(t,e)},"minu-icon"(t,e){return Ze(t,e)}},ko=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"})),Vt=(t,e)=>{const o=U("NIcon"),n=U(t.__slot__[e]);return G(o,{component:n})},Ao={prefix(t,e){return Vt(t,e)},suffix(t,e){return Vt(t,e)}},Po=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Mo={default(t){const{default:{type:e,options:o,space:n}}=t.__slot__,a=e==="button",l=U(a?"n-radio-button":"n-radio"),r=U("n-space");return a?o.map(s=>G(l,s)):G(r,n,()=>o.map(s=>G(l,s)))}},No=Object.freeze(Object.defineProperty({__proto__:null,default:Mo},Symbol.toStringTag,{value:"Module"})),$o={default(t,e){return t.__slot__[e]}},Ro=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"})),Fo={thumb(t,e){return t.__slot__[e]}},Go=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Uo={checked(t,e){return t.__slot__[e]},unchecked(t,e){return t.__slot__[e]},icon(t,e){return t.__slot__[e]},"checked-icon"(t,e){return t.__slot__[e]},"unchecked-icon"(t,e){return t.__slot__[e]}},Wo=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"}));function jo(t){const e=t.split("/").at(-1),o=t.split(e).at(0),[n,...a]=e.split(".").reverse();return{dir:o,base:e,ext:`.${n}`,name:a.reverse().join(".")}}function Nt(t){return f(t).length?f(t).reduce((e,o)=>{const{__vModel__:n,__config__:a,label:l,__rules__:r}=o,s=[];return a.required&&s.push({required:!0,message:`${l}必须填写`,trigger:"blur"}),r!=null&&r.length&&r.forEach(u=>{u.pattern&&s.push({validator:(i,d)=>new RegExp(u.pattern.slice(1,-1)).test(d),message:u.message||`${l}错误`,trigger:"blur"})}),{...e,[n]:s}},{}):{}}const _n={},Lt=Object.assign({"./n-checkbox-group.ts":To,"./n-input-group.ts":xo,"./n-input-number.ts":ko,"./n-input.ts":Po,"./n-radio-group.ts":No,"./n-rate.ts":Ro,"./n-slider.ts":Go,"./n-switch.ts":Wo});Object.keys(Lt).forEach(t=>{const e=Lt[t].default||{},{name:o}=jo(t);_n[o]=e});function zo(t,e){const{tag:o,__slot__:n}=t,a=_n[o],l={};return o==="n-input-group"?()=>a.default(t,e):(a&&(a.default&&n.default&&(l.default=()=>a.default(t,e)),Object.keys(a).forEach(r=>{const s=a[r];n&&n[r]&&(l[r]=()=>s(t,r))})),l)}function Xo(t,e,{props:o,emit:n}){const{tagType:a,__config__:l,__emits__:r={}}=e;return["Date","Time"].includes(a)&&l.valueFormat?(t["value-format"]=o.value,t["onUpdate:formatted-value"]=s=>{t["value-format"]=s,n("update:value",s),Yt(r,s,o)},t):(t.value=o.value,t["onUpdate:value"]=s=>{t.value=s,n("update:value",s),Yt(r,s,o)},t)}function Yt(t="",e,o){const n=o.model;Object.values(t).forEach(a=>{a(e,n)})}const $t=N({name:"LcFormItem",props:{value:{type:[String,Number,Object,Boolean],required:!1,default:void 0},model:{type:Object,required:!1},conf:{type:Object,required:!0}},emits:["update:value"],setup(t,{attrs:e,slots:o,emit:n}){return()=>{const{__config__:a,tag:l,tagType:r}=t.conf||{};if(r.toLocaleLowerCase()==="custom"){const s=o[l];return s&&G(s,{value:t.value})}else{const s=U(l);let u=Ie(a,e);u=Xo(u,t.conf,{props:t,emit:n});const i=zo(t.conf,u);return G(s,u,i)}}}}),Bo=["cols","collapsed","collapsedRows","layoutShiftDisabled","responsive","itemResponsive","xGap","yGap"],Vo=N({name:"LcForm",components:{FormItem:$t},props:{value:{type:Object,required:!0},conf:{type:Object,required:!0}},emits:["update:value"],setup(t,{emit:e,expose:o}){const n=X(),a=ne({get(){return t.value},set(c){e("update:value",c)}}),l=ne(()=>{const{items:c}=t.conf,_=Nt(c);return!u&&i(),_}),r=ne(()=>{const{fromGrid:c}=t.conf,_={};return Bo.forEach(h=>{Object.hasOwn(c,h)&&(_[h]=c[h])}),_}),s=ne(()=>t.conf.fromGlobal);let u=!1;const i=()=>{const{conf:{items:c},value:_}=t;a.value=c.reduce((h,p)=>{const{__vModel__:y}=p;return{[y]:void 0,...h}},_??{}),u=!0},d=()=>{e("update:value",f(a))};return o({formRef:n,validate(...c){var _;return(_=n.value)==null?void 0:_.validate(...c)},reset(){var c;(c=n.value)==null||c.restoreValidation()}}),{formRef:n,fromGrid:r,fromGlobal:s,formValue:a,formRules:l,bindUpdate:d}}}),Lo=(t,e)=>{const o=t.__vccOpts||t;for(const[n,a]of e)o[n]=a;return o};function Yo(t,e,o,n,a,l){const r=U("form-item"),s=U("n-form-item-gi"),u=U("n-grid"),i=U("n-form");return C(),Y(i,Ie({ref:"formRef"},t.fromGlobal,{model:t.formValue,rules:t.formRules}),{default:v(()=>[m(u,$n(Rn(t.fromGrid)),{default:v(()=>[(C(!0),I(R,null,q(t.conf.items,d=>(C(),Y(s,Ie({key:d.__uuid__},d.__layout__,{label:d.label,path:d.__vModel__}),{default:v(()=>[m(r,{value:t.formValue[d.__vModel__],"onUpdate:value":[c=>t.formValue[d.__vModel__]=c,t.bindUpdate],model:t.formValue,conf:d},null,8,["value","onUpdate:value","model","conf"])]),_:2},1040,["label","path"]))),128))]),_:1},16)]),_:1},16,["model","rules"])}const Ho=Lo(Vo,[["render",Yo]]),qo={},Ht=Object.assign({});Object.keys(Ht).forEach(t=>{const e=Ht[t].default||{};qo[e.name]=e});const Zo={class:"center-toolbar"},Ko=N({name:"CenterToolbar",inheritAttrs:!0}),Qo=N({...Ko,props:{designer:{default:void 0}},emits:["onUndo","onRedo","onPreview","onEmpty","onSave"],setup(t,{emit:e}){const o=t,n=d=>{const{designer:c}=o,h=`on${d.replace(/^\S/,p=>p.toUpperCase())}`;s.value=c.getConf(),c[d]((...p)=>{d==="preview"&&(a.value=p[0])}),e(h)},a=X(!1),l=X(),r=X({}),s=X({}),u=()=>{l.value.reset()},i=()=>{const{validate:d}=l.value;d(),console.log("表单提交信息:",Wt(r.value),"表单配置信息:",Wt(s.value))};return(d,c)=>{const _=Se,h=Wn,p=Ae,y=Pt,x=jn,j=rn;return C(),I(R,null,[M("div",Zo,[m(p,{quaternary:"",circle:"",size:"small",onClick:c[0]||(c[0]=D=>n("undo"))},{icon:v(()=>[m(h,null,{trigger:v(()=>[m(_,{component:f(Fn)},null,8,["component"])]),default:v(()=>[me(" 撤销 ")]),_:1})]),_:1}),m(p,{quaternary:"",circle:"",size:"small",onClick:c[1]||(c[1]=D=>n("redo"))},{icon:v(()=>[m(h,null,{trigger:v(()=>[m(_,{component:f(Gn)},null,8,["component"])]),default:v(()=>[me(" 恢复 ")]),_:1})]),_:1}),m(p,{quaternary:"",circle:"",size:"small",type:"info",onClick:c[2]||(c[2]=D=>n("preview"))},{icon:v(()=>[m(h,null,{trigger:v(()=>[m(_,{component:f(Un)},null,8,["component"])]),default:v(()=>[me(" 预览 ")]),_:1})]),_:1}),m(p,{quaternary:"",circle:"",size:"small",type:"error",onClick:c[3]||(c[3]=D=>n("empty"))},{icon:v(()=>[m(h,null,{trigger:v(()=>[m(_,{component:f(ln)},null,8,["component"])]),default:v(()=>[me(" 清空 ")]),_:1})]),_:1}),m(p,{size:"small",type:"primary",onClick:c[4]||(c[4]=D=>n("save"))},{default:v(()=>[me("保存")]),_:1})]),m(j,{show:f(a),"onUpdate:show":c[6]||(c[6]=D=>ke(a)?a.value=D:null),"mask-closable":!1,"on-after-leave":()=>r.value={},size:"small",preset:"card",title:"选择图标",style:{width:"920px"}},{footer:v(()=>[m(x,null,{default:v(()=>[m(p,{type:"primary",tertiary:"",onClick:i},{default:v(()=>[me("提交")]),_:1}),m(p,{type:"info",tertiary:"",onClick:u},{default:v(()=>[me("重置")]),_:1})]),_:1})]),default:v(()=>[m(y,{style:{"max-height":"600px","padding-right":"10px"}},{default:v(()=>[m(f(Ho),{ref_key:"formRef",ref:l,value:f(r),"onUpdate:value":c[5]||(c[5]=D=>ke(r)?r.value=D:null),class:"preview-form",conf:f(s)},null,8,["value","conf"])]),_:1})]),_:1},8,["show","on-after-leave"])],64)}}});const Jo=De(Qo,[["__scopeId","data-v-f4228483"]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),o.push.apply(o,n)}return o}function re(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?qt(Object(o),!0).forEach(function(n){ea(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):qt(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function tt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tt=function(e){return typeof e}:tt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(t)}function ea(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function ce(){return ce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ce.apply(this,arguments)}function ta(t,e){if(t==null)return{};var o={},n=Object.keys(t),a,l;for(l=0;l<n.length;l++)a=n[l],!(e.indexOf(a)>=0)&&(o[a]=t[a]);return o}function na(t,e){if(t==null)return{};var o=ta(t,e),n,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var oa="1.15.0";function ue(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var de=ue(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ye=ue(/Edge/i),Zt=ue(/firefox/i),ze=ue(/safari/i)&&!ue(/chrome/i)&&!ue(/android/i),gn=ue(/iP(ad|od|hone)/i),hn=ue(/chrome/i)&&ue(/android/i),vn={capture:!1,passive:!1};function O(t,e,o){t.addEventListener(e,o,!de&&vn)}function T(t,e,o){t.removeEventListener(e,o,!de&&vn)}function it(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function aa(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ae(t,e,o,n){if(t){o=o||document;do{if(e!=null&&(e[0]===">"?t.parentNode===o&&it(t,e):it(t,e))||n&&t===o)return t;if(t===o)break}while(t=aa(t))}return null}var Kt=/\s+/g;function K(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Kt," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(Kt," ")}}function w(t,e,o){var n=t&&t.style;if(n){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),e===void 0?o:o[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=o+(typeof o=="string"?"":"px")}}function Pe(t,e){var o="";if(typeof t=="string")o=t;else do{var n=w(t,"transform");n&&n!=="none"&&(o=n+" "+o)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(o)}function bn(t,e,o){if(t){var n=t.getElementsByTagName(e),a=0,l=n.length;if(o)for(;a<l;a++)o(n[a],a);return n}return[]}function le(){var t=document.scrollingElement;return t||document.documentElement}function F(t,e,o,n,a){if(!(!t.getBoundingClientRect&&t!==window)){var l,r,s,u,i,d,c;if(t!==window&&t.parentNode&&t!==le()?(l=t.getBoundingClientRect(),r=l.top,s=l.left,u=l.bottom,i=l.right,d=l.height,c=l.width):(r=0,s=0,u=window.innerHeight,i=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(e||o)&&t!==window&&(a=a||t.parentNode,!de))do if(a&&a.getBoundingClientRect&&(w(a,"transform")!=="none"||o&&w(a,"position")!=="static")){var _=a.getBoundingClientRect();r-=_.top+parseInt(w(a,"border-top-width")),s-=_.left+parseInt(w(a,"border-left-width")),u=r+l.height,i=s+l.width;break}while(a=a.parentNode);if(n&&t!==window){var h=Pe(a||t),p=h&&h.a,y=h&&h.d;h&&(r/=y,s/=p,c/=p,d/=y,u=r+d,i=s+c)}return{top:r,left:s,bottom:u,right:i,width:c,height:d}}}function Qt(t,e,o){for(var n=he(t,!0),a=F(t)[e];n;){var l=F(n)[o],r=void 0;if(o==="top"||o==="left"?r=a>=l:r=a<=l,!r)return n;if(n===le())break;n=he(n,!1)}return!1}function Me(t,e,o,n){for(var a=0,l=0,r=t.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==E.ghost&&(n||r[l]!==E.dragged)&&ae(r[l],o.draggable,t,!1)){if(a===e)return r[l];a++}l++}return null}function Rt(t,e){for(var o=t.lastElementChild;o&&(o===E.ghost||w(o,"display")==="none"||e&&!it(o,e));)o=o.previousElementSibling;return o||null}function ee(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==E.clone&&(!e||it(t,e))&&o++;return o}function Jt(t){var e=0,o=0,n=le();if(t)do{var a=Pe(t),l=a.a,r=a.d;e+=t.scrollLeft*l,o+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,o]}function la(t,e){for(var o in t)if(t.hasOwnProperty(o)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[o][n])return Number(o)}return-1}function he(t,e){if(!t||!t.getBoundingClientRect)return le();var o=t,n=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var a=w(o);if(o.clientWidth<o.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return le();if(n||e)return o;n=!0}}while(o=o.parentNode);return le()}function ra(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function ht(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Xe;function yn(t,e){return function(){if(!Xe){var o=arguments,n=this;o.length===1?t.call(n,o[0]):t.apply(n,o),Xe=setTimeout(function(){Xe=void 0},e)}}}function ia(){clearTimeout(Xe),Xe=void 0}function wn(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function En(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}var J="Sortable"+new Date().getTime();function sa(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(w(a,"display")==="none"||a===E.ghost)){t.push({target:a,rect:F(a)});var l=re({},t[t.length-1].rect);if(a.thisAnimationDuration){var r=Pe(a,!0);r&&(l.top-=r.f,l.left-=r.e)}a.fromRect=l}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(la(t,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var l=!1,r=0;t.forEach(function(s){var u=0,i=s.target,d=i.fromRect,c=F(i),_=i.prevFromRect,h=i.prevToRect,p=s.rect,y=Pe(i,!0);y&&(c.top-=y.f,c.left-=y.e),i.toRect=c,i.thisAnimationDuration&&ht(_,c)&&!ht(d,c)&&(p.top-c.top)/(p.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(u=ca(p,_,h,a.options)),ht(c,d)||(i.prevFromRect=d,i.prevToRect=c,u||(u=a.options.animation),a.animate(i,p,c,u)),u&&(l=!0,r=Math.max(r,u),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},u),i.thisAnimationDuration=u)}),clearTimeout(e),l?e=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),t=[]},animate:function(n,a,l,r){if(r){w(n,"transition",""),w(n,"transform","");var s=Pe(this.el),u=s&&s.a,i=s&&s.d,d=(a.left-l.left)/(u||1),c=(a.top-l.top)/(i||1);n.animatingX=!!d,n.animatingY=!!c,w(n,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=ua(n),w(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),w(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){w(n,"transition",""),w(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function ua(t){return t.offsetWidth}function ca(t,e,o,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))*n.animation}var Ce=[],vt={initializeByDefault:!0},He={mount:function(e){for(var o in vt)vt.hasOwnProperty(o)&&!(o in e)&&(e[o]=vt[o]);Ce.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ce.push(e)},pluginEvent:function(e,o,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var l=e+"Global";Ce.forEach(function(r){o[r.pluginName]&&(o[r.pluginName][l]&&o[r.pluginName][l](re({sortable:o},n)),o.options[r.pluginName]&&o[r.pluginName][e]&&o[r.pluginName][e](re({sortable:o},n)))})},initializePlugins:function(e,o,n,a){Ce.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var i=new s(e,o,e.options);i.sortable=e,i.options=e.options,e[u]=i,ce(n,i.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var r=this.modifyOption(e,l,e.options[l]);typeof r<"u"&&(e.options[l]=r)}},getEventProperties:function(e,o){var n={};return Ce.forEach(function(a){typeof a.eventProperties=="function"&&ce(n,a.eventProperties.call(o[a.pluginName],e))}),n},modifyOption:function(e,o,n){var a;return Ce.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[o]=="function"&&(a=l.optionListeners[o].call(e[l.pluginName],n))}),a}};function da(t){var e=t.sortable,o=t.rootEl,n=t.name,a=t.targetEl,l=t.cloneEl,r=t.toEl,s=t.fromEl,u=t.oldIndex,i=t.newIndex,d=t.oldDraggableIndex,c=t.newDraggableIndex,_=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||o&&o[J],!!e){var y,x=e.options,j="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!de&&!Ye?y=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(n,!0,!0)),y.to=r||o,y.from=s||o,y.item=a||o,y.clone=l,y.oldIndex=u,y.newIndex=i,y.oldDraggableIndex=d,y.newDraggableIndex=c,y.originalEvent=_,y.pullMode=h?h.lastPutMode:void 0;var D=re(re({},p),He.getEventProperties(n,e));for(var W in D)y[W]=D[W];o&&o.dispatchEvent(y),x[j]&&x[j].call(e,y)}}var fa=["evt"],H=function(e,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,l=na(n,fa);He.pluginEvent.bind(E)(e,o,re({dragEl:g,parentEl:P,ghostEl:S,rootEl:k,nextEl:Ee,lastDownEl:nt,cloneEl:A,cloneHidden:ge,dragStarted:Ue,putSortable:z,activeSortable:E.active,originalEvent:a,oldIndex:xe,oldDraggableIndex:Be,newIndex:Q,newDraggableIndex:_e,hideGhostForTarget:Tn,unhideGhostForTarget:On,cloneNowHidden:function(){ge=!0},cloneNowShown:function(){ge=!1},dispatchSortableEvent:function(s){L({sortable:o,name:s,originalEvent:a})}},l))};function L(t){da(re({putSortable:z,cloneEl:A,targetEl:g,rootEl:k,oldIndex:xe,oldDraggableIndex:Be,newIndex:Q,newDraggableIndex:_e},t))}var g,P,S,k,Ee,nt,A,ge,xe,Q,Be,_e,Ke,z,Oe=!1,st=!1,ut=[],ye,te,bt,yt,en,tn,Ue,Te,Ve,Le=!1,Qe=!1,ot,V,wt=[],xt=!1,ct=[],gt=typeof document<"u",Je=gn,nn=Ye||de?"cssFloat":"float",pa=gt&&!hn&&!gn&&"draggable"in document.createElement("div"),Sn=function(){if(gt){if(de)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Dn=function(e,o){var n=w(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),l=Me(e,0,o),r=Me(e,1,o),s=l&&w(l),u=r&&w(r),i=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+F(l).width,d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+F(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return r&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||i>=a&&n[nn]==="none"||r&&n[nn]==="none"&&i+d>a)?"vertical":"horizontal"},ma=function(e,o,n){var a=n?e.left:e.top,l=n?e.right:e.bottom,r=n?e.width:e.height,s=n?o.left:o.top,u=n?o.right:o.bottom,i=n?o.width:o.height;return a===s||l===u||a+r/2===s+i/2},_a=function(e,o){var n;return ut.some(function(a){var l=a[J].options.emptyInsertThreshold;if(!(!l||Rt(a))){var r=F(a),s=e>=r.left-l&&e<=r.right+l,u=o>=r.top-l&&o<=r.bottom+l;if(s&&u)return n=a}}),n},Cn=function(e){function o(l,r){return function(s,u,i,d){var c=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(l==null&&(r||c))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return o(l(s,u,i,d),r)(s,u,i,d);var _=(r?s:u).options.group.name;return l===!0||typeof l=="string"&&l===_||l.join&&l.indexOf(_)>-1}}var n={},a=e.group;(!a||tt(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=o(a.pull,!0),n.checkPut=o(a.put),n.revertClone=a.revertClone,e.group=n},Tn=function(){!Sn&&S&&w(S,"display","none")},On=function(){!Sn&&S&&w(S,"display","")};gt&&!hn&&document.addEventListener("click",function(t){if(st)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),st=!1,!1},!0);var we=function(e){if(g){e=e.touches?e.touches[0]:e;var o=_a(e.clientX,e.clientY);if(o){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=o,n.preventDefault=void 0,n.stopPropagation=void 0,o[J]._onDragOver(n)}}},ga=function(e){g&&g.parentNode[J]._isOutsideThisEl(e.target)};function E(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ce({},e),t[J]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Dn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:E.supportPointer!==!1&&"PointerEvent"in window&&!ze,emptyInsertThreshold:5};He.initializePlugins(this,t,o);for(var n in o)!(n in e)&&(e[n]=o[n]);Cn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:pa,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?O(t,"pointerdown",this._onTapStart):(O(t,"mousedown",this._onTapStart),O(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(t,"dragover",this),O(t,"dragenter",this)),ut.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ce(this,sa())}E.prototype={constructor:E,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Te=null)},_getDirection:function(e,o){return typeof this.options.direction=="function"?this.options.direction.call(this,e,o,g):this.options.direction},_onTapStart:function(e){if(e.cancelable){var o=this,n=this.el,a=this.options,l=a.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,i=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,d=a.filter;if(Da(n),!g&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||a.disabled)&&!i.isContentEditable&&!(!this.nativeDraggable&&ze&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ae(u,a.draggable,n,!1),!(u&&u.animated)&&nt!==u)){if(xe=ee(u),Be=ee(u,a.draggable),typeof d=="function"){if(d.call(this,e,u,this)){L({sortable:o,rootEl:i,name:"filter",targetEl:u,toEl:n,fromEl:n}),H("filter",o,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=ae(i,c.trim(),n,!1),c)return L({sortable:o,rootEl:c,name:"filter",targetEl:u,fromEl:n,toEl:n}),H("filter",o,{evt:e}),!0}),d)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!ae(i,a.handle,n,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,o,n){var a=this,l=a.el,r=a.options,s=l.ownerDocument,u;if(n&&!g&&n.parentNode===l){var i=F(n);if(k=l,g=n,P=g.parentNode,Ee=g.nextSibling,nt=n,Ke=r.group,E.dragged=g,ye={target:g,clientX:(o||e).clientX,clientY:(o||e).clientY},en=ye.clientX-i.left,tn=ye.clientY-i.top,this._lastX=(o||e).clientX,this._lastY=(o||e).clientY,g.style["will-change"]="all",u=function(){if(H("delayEnded",a,{evt:e}),E.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Zt&&a.nativeDraggable&&(g.draggable=!0),a._triggerDragStart(e,o),L({sortable:a,name:"choose",originalEvent:e}),K(g,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){bn(g,d.trim(),Et)}),O(s,"dragover",we),O(s,"mousemove",we),O(s,"touchmove",we),O(s,"mouseup",a._onDrop),O(s,"touchend",a._onDrop),O(s,"touchcancel",a._onDrop),Zt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),H("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(Ye||de))){if(E.eventCanceled){this._onDrop();return}O(s,"mouseup",a._disableDelayedDrag),O(s,"touchend",a._disableDelayedDrag),O(s,"touchcancel",a._disableDelayedDrag),O(s,"mousemove",a._delayedDragTouchMoveHandler),O(s,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&O(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(u,r.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var o=e.touches?e.touches[0]:e;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&Et(g),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;T(e,"mouseup",this._disableDelayedDrag),T(e,"touchend",this._disableDelayedDrag),T(e,"touchcancel",this._disableDelayedDrag),T(e,"mousemove",this._delayedDragTouchMoveHandler),T(e,"touchmove",this._delayedDragTouchMoveHandler),T(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,o){o=o||e.pointerType=="touch"&&e,!this.nativeDraggable||o?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):o?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(g,"dragend",this),O(k,"dragstart",this._onDragStart));try{document.selection?at(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,o){if(Oe=!1,k&&g){H("dragStarted",this,{evt:o}),this.nativeDraggable&&O(document,"dragover",ga);var n=this.options;!e&&K(g,n.dragClass,!1),K(g,n.ghostClass,!0),E.active=this,e&&this._appendGhost(),L({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(te){this._lastX=te.clientX,this._lastY=te.clientY,Tn();for(var e=document.elementFromPoint(te.clientX,te.clientY),o=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(te.clientX,te.clientY),e!==o);)o=e;if(g.parentNode[J]._isOutsideThisEl(e),o)do{if(o[J]){var n=void 0;if(n=o[J]._onDragOver({clientX:te.clientX,clientY:te.clientY,target:e,rootEl:o}),n&&!this.options.dragoverBubble)break}e=o}while(o=o.parentNode);On()}},_onTouchMove:function(e){if(ye){var o=this.options,n=o.fallbackTolerance,a=o.fallbackOffset,l=e.touches?e.touches[0]:e,r=S&&Pe(S,!0),s=S&&r&&r.a,u=S&&r&&r.d,i=Je&&V&&Jt(V),d=(l.clientX-ye.clientX+a.x)/(s||1)+(i?i[0]-wt[0]:0)/(s||1),c=(l.clientY-ye.clientY+a.y)/(u||1)+(i?i[1]-wt[1]:0)/(u||1);if(!E.active&&!Oe){if(n&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(S){r?(r.e+=d-(bt||0),r.f+=c-(yt||0)):r={a:1,b:0,c:0,d:1,e:d,f:c};var _="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");w(S,"webkitTransform",_),w(S,"mozTransform",_),w(S,"msTransform",_),w(S,"transform",_),bt=d,yt=c,te=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!S){var e=this.options.fallbackOnBody?document.body:k,o=F(g,!0,Je,!0,e),n=this.options;if(Je){for(V=e;w(V,"position")==="static"&&w(V,"transform")==="none"&&V!==document;)V=V.parentNode;V!==document.body&&V!==document.documentElement?(V===document&&(V=le()),o.top+=V.scrollTop,o.left+=V.scrollLeft):V=le(),wt=Jt(V)}S=g.cloneNode(!0),K(S,n.ghostClass,!1),K(S,n.fallbackClass,!0),K(S,n.dragClass,!0),w(S,"transition",""),w(S,"transform",""),w(S,"box-sizing","border-box"),w(S,"margin",0),w(S,"top",o.top),w(S,"left",o.left),w(S,"width",o.width),w(S,"height",o.height),w(S,"opacity","0.8"),w(S,"position",Je?"absolute":"fixed"),w(S,"zIndex","100000"),w(S,"pointerEvents","none"),E.ghost=S,e.appendChild(S),w(S,"transform-origin",en/parseInt(S.style.width)*100+"% "+tn/parseInt(S.style.height)*100+"%")}},_onDragStart:function(e,o){var n=this,a=e.dataTransfer,l=n.options;if(H("dragStart",this,{evt:e}),E.eventCanceled){this._onDrop();return}H("setupClone",this),E.eventCanceled||(A=En(g),A.removeAttribute("id"),A.draggable=!1,A.style["will-change"]="",this._hideClone(),K(A,this.options.chosenClass,!1),E.clone=A),n.cloneId=at(function(){H("clone",n),!E.eventCanceled&&(n.options.removeCloneOnHide||k.insertBefore(A,g),n._hideClone(),L({sortable:n,name:"clone"}))}),!o&&K(g,l.dragClass,!0),o?(st=!0,n._loopId=setInterval(n._emulateDragOver,50)):(T(document,"mouseup",n._onDrop),T(document,"touchend",n._onDrop),T(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(n,a,g)),O(document,"drop",n),w(g,"transform","translateZ(0)")),Oe=!0,n._dragStartId=at(n._dragStarted.bind(n,o,e)),O(document,"selectstart",n),Ue=!0,ze&&w(document.body,"user-select","none")},_onDragOver:function(e){var o=this.el,n=e.target,a,l,r,s=this.options,u=s.group,i=E.active,d=Ke===u,c=s.sort,_=z||i,h,p=this,y=!1;if(xt)return;function x(Ge,Mn){H(Ge,p,re({evt:e,isOwner:d,axis:h?"vertical":"horizontal",revert:r,dragRect:a,targetRect:l,canSort:c,fromSortable:_,target:n,completed:D,onMove:function(Ut,Nn){return et(k,o,g,a,Ut,F(Ut),e,Nn)},changed:W},Mn))}function j(){x("dragOverAnimationCapture"),p.captureAnimationState(),p!==_&&_.captureAnimationState()}function D(Ge){return x("dragOverCompleted",{insertion:Ge}),Ge&&(d?i._hideClone():i._showClone(p),p!==_&&(K(g,z?z.options.ghostClass:i.options.ghostClass,!1),K(g,s.ghostClass,!0)),z!==p&&p!==E.active?z=p:p===E.active&&z&&(z=null),_===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){x("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(n===g&&!g.animated||n===o&&!n.animated)&&(Te=null),!s.dragoverBubble&&!e.rootEl&&n!==document&&(g.parentNode[J]._isOutsideThisEl(e.target),!Ge&&we(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function W(){Q=ee(g),_e=ee(g,s.draggable),L({sortable:p,name:"change",toEl:o,newIndex:Q,newDraggableIndex:_e,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=ae(n,s.draggable,o,!0),x("dragOver"),E.eventCanceled)return y;if(g.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return D(!1);if(st=!1,i&&!s.disabled&&(d?c||(r=P!==k):z===this||(this.lastPutMode=Ke.checkPull(this,i,g,e))&&u.checkPut(this,i,g,e))){if(h=this._getDirection(e,n)==="vertical",a=F(g),x("dragOverValid"),E.eventCanceled)return y;if(r)return P=k,j(),this._hideClone(),x("revert"),E.eventCanceled||(Ee?k.insertBefore(g,Ee):k.appendChild(g)),D(!0);var b=Rt(o,s.draggable);if(!b||ya(e,h,this)&&!b.animated){if(b===g)return D(!1);if(b&&o===e.target&&(n=b),n&&(l=F(n)),et(k,o,g,a,n,l,e,!!n)!==!1)return j(),b&&b.nextSibling?o.insertBefore(g,b.nextSibling):o.appendChild(g),P=o,W(),D(!0)}else if(b&&ba(e,h,this)){var B=Me(o,0,s,!0);if(B===g)return D(!1);if(n=B,l=F(n),et(k,o,g,a,n,l,e,!1)!==!1)return j(),o.insertBefore(g,B),P=o,W(),D(!0)}else if(n.parentNode===o){l=F(n);var oe=0,ve,Ne=g.parentNode!==o,Z=!ma(g.animated&&g.toRect||a,n.animated&&n.toRect||l,h),$e=h?"top":"left",fe=Qt(n,"top","top")||Qt(g,"top","top"),Re=fe?fe.scrollTop:void 0;Te!==n&&(ve=l[$e],Le=!1,Qe=!Z&&s.invertSwap||Ne),oe=wa(e,n,l,h,Z?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Qe,Te===n);var ie;if(oe!==0){var be=ee(g);do be-=oe,ie=P.children[be];while(ie&&(w(ie,"display")==="none"||ie===S))}if(oe===0||ie===n)return D(!1);Te=n,Ve=oe;var Fe=n.nextElementSibling,pe=!1;pe=oe===1;var qe=et(k,o,g,a,n,l,e,pe);if(qe!==!1)return(qe===1||qe===-1)&&(pe=qe===1),xt=!0,setTimeout(va,30),j(),pe&&!Fe?o.appendChild(g):n.parentNode.insertBefore(g,pe?Fe:n),fe&&wn(fe,0,Re-fe.scrollTop),P=g.parentNode,ve!==void 0&&!Qe&&(ot=Math.abs(ve-F(n)[$e])),W(),D(!0)}if(o.contains(g))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){T(document,"mousemove",this._onTouchMove),T(document,"touchmove",this._onTouchMove),T(document,"pointermove",this._onTouchMove),T(document,"dragover",we),T(document,"mousemove",we),T(document,"touchmove",we)},_offUpEvents:function(){var e=this.el.ownerDocument;T(e,"mouseup",this._onDrop),T(e,"touchend",this._onDrop),T(e,"pointerup",this._onDrop),T(e,"touchcancel",this._onDrop),T(document,"selectstart",this)},_onDrop:function(e){var o=this.el,n=this.options;if(Q=ee(g),_e=ee(g,n.draggable),H("drop",this,{evt:e}),P=g&&g.parentNode,Q=ee(g),_e=ee(g,n.draggable),E.eventCanceled){this._nulling();return}Oe=!1,Qe=!1,Le=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),It(this.cloneId),It(this._dragStartId),this.nativeDraggable&&(T(document,"drop",this),T(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ze&&w(document.body,"user-select",""),w(g,"transform",""),e&&(Ue&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),S&&S.parentNode&&S.parentNode.removeChild(S),(k===P||z&&z.lastPutMode!=="clone")&&A&&A.parentNode&&A.parentNode.removeChild(A),g&&(this.nativeDraggable&&T(g,"dragend",this),Et(g),g.style["will-change"]="",Ue&&!Oe&&K(g,z?z.options.ghostClass:this.options.ghostClass,!1),K(g,this.options.chosenClass,!1),L({sortable:this,name:"unchoose",toEl:P,newIndex:null,newDraggableIndex:null,originalEvent:e}),k!==P?(Q>=0&&(L({rootEl:P,name:"add",toEl:P,fromEl:k,originalEvent:e}),L({sortable:this,name:"remove",toEl:P,originalEvent:e}),L({rootEl:P,name:"sort",toEl:P,fromEl:k,originalEvent:e}),L({sortable:this,name:"sort",toEl:P,originalEvent:e})),z&&z.save()):Q!==xe&&Q>=0&&(L({sortable:this,name:"update",toEl:P,originalEvent:e}),L({sortable:this,name:"sort",toEl:P,originalEvent:e})),E.active&&((Q==null||Q===-1)&&(Q=xe,_e=Be),L({sortable:this,name:"end",toEl:P,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){H("nulling",this),k=g=P=S=Ee=A=nt=ge=ye=te=Ue=Q=_e=xe=Be=Te=Ve=z=Ke=E.dragged=E.ghost=E.clone=E.active=null,ct.forEach(function(e){e.checked=!0}),ct.length=bt=yt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":g&&(this._onDragOver(e),ha(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],o,n=this.el.children,a=0,l=n.length,r=this.options;a<l;a++)o=n[a],ae(o,r.draggable,this.el,!1)&&e.push(o.getAttribute(r.dataIdAttr)||Sa(o));return e},sort:function(e,o){var n={},a=this.el;this.toArray().forEach(function(l,r){var s=a.children[r];ae(s,this.options.draggable,a,!1)&&(n[l]=s)},this),o&&this.captureAnimationState(),e.forEach(function(l){n[l]&&(a.removeChild(n[l]),a.appendChild(n[l]))}),o&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,o){return ae(e,o||this.options.draggable,this.el,!1)},option:function(e,o){var n=this.options;if(o===void 0)return n[e];var a=He.modifyOption(this,e,o);typeof a<"u"?n[e]=a:n[e]=o,e==="group"&&Cn(n)},destroy:function(){H("destroy",this);var e=this.el;e[J]=null,T(e,"mousedown",this._onTapStart),T(e,"touchstart",this._onTapStart),T(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(T(e,"dragover",this),T(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ut.splice(ut.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ge){if(H("hideClone",this),E.eventCanceled)return;w(A,"display","none"),this.options.removeCloneOnHide&&A.parentNode&&A.parentNode.removeChild(A),ge=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ge){if(H("showClone",this),E.eventCanceled)return;g.parentNode==k&&!this.options.group.revertClone?k.insertBefore(A,g):Ee?k.insertBefore(A,Ee):k.appendChild(A),this.options.group.revertClone&&this.animate(g,A),w(A,"display",""),ge=!1}}};function ha(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function et(t,e,o,n,a,l,r,s){var u,i=t[J],d=i.options.onMove,c;return window.CustomEvent&&!de&&!Ye?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=o,u.draggedRect=n,u.related=a||e,u.relatedRect=l||F(e),u.willInsertAfter=s,u.originalEvent=r,t.dispatchEvent(u),d&&(c=d.call(i,u,r)),c}function Et(t){t.draggable=!1}function va(){xt=!1}function ba(t,e,o){var n=F(Me(o.el,0,o.options,!0)),a=10;return e?t.clientX<n.left-a||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-a||t.clientY<n.bottom&&t.clientX<n.left}function ya(t,e,o){var n=F(Rt(o.el,o.options.draggable)),a=10;return e?t.clientX>n.right+a||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+a}function wa(t,e,o,n,a,l,r,s){var u=n?t.clientY:t.clientX,i=n?o.height:o.width,d=n?o.top:o.left,c=n?o.bottom:o.right,_=!1;if(!r){if(s&&ot<i*a){if(!Le&&(Ve===1?u>d+i*l/2:u<c-i*l/2)&&(Le=!0),Le)_=!0;else if(Ve===1?u<d+ot:u>c-ot)return-Ve}else if(u>d+i*(1-a)/2&&u<c-i*(1-a)/2)return Ea(e)}return _=_||r,_&&(u<d+i*l/2||u>c-i*l/2)?u>d+i/2?1:-1:0}function Ea(t){return ee(g)<ee(t)?1:-1}function Sa(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function Da(t){ct.length=0;for(var e=t.getElementsByTagName("input"),o=e.length;o--;){var n=e[o];n.checked&&ct.push(n)}}function at(t){return setTimeout(t,0)}function It(t){return clearTimeout(t)}gt&&O(document,"touchmove",function(t){(E.active||Oe)&&t.cancelable&&t.preventDefault()});E.utils={on:O,off:T,css:w,find:bn,is:function(e,o){return!!ae(e,o,e,!1)},extend:ra,throttle:yn,closest:ae,toggleClass:K,clone:En,index:ee,nextTick:at,cancelNextTick:It,detectDirection:Dn,getChild:Me};E.get=function(t){return t[J]};E.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(E.utils=re(re({},E.utils),n.utils)),He.mount(n)})};E.create=function(t,e){return new E(t,e)};E.version=oa;var $=[],We,kt,At=!1,St,Dt,dt,je;function Ca(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(o){var n=o.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):n.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var n=o.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):(T(document,"pointermove",this._handleFallbackAutoScroll),T(document,"touchmove",this._handleFallbackAutoScroll),T(document,"mousemove",this._handleFallbackAutoScroll)),on(),lt(),ia()},nulling:function(){dt=kt=We=At=je=St=Dt=null,$.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,n){var a=this,l=(o.touches?o.touches[0]:o).clientX,r=(o.touches?o.touches[0]:o).clientY,s=document.elementFromPoint(l,r);if(dt=o,n||this.options.forceAutoScrollFallback||Ye||de||ze){Ct(o,this.options,s,n);var u=he(s,!0);At&&(!je||l!==St||r!==Dt)&&(je&&on(),je=setInterval(function(){var i=he(document.elementFromPoint(l,r),!0);i!==u&&(u=i,lt()),Ct(o,a.options,i,n)},10),St=l,Dt=r)}else{if(!this.options.bubbleScroll||he(s,!0)===le()){lt();return}Ct(o,this.options,he(s,!1),!1)}}},ce(t,{pluginName:"scroll",initializeByDefault:!0})}function lt(){$.forEach(function(t){clearInterval(t.pid)}),$=[]}function on(){clearInterval(je)}var Ct=yn(function(t,e,o,n){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,u=le(),i=!1,d;kt!==o&&(kt=o,lt(),We=e.scroll,d=e.scrollFn,We===!0&&(We=he(o,!0)));var c=0,_=We;do{var h=_,p=F(h),y=p.top,x=p.bottom,j=p.left,D=p.right,W=p.width,b=p.height,B=void 0,oe=void 0,ve=h.scrollWidth,Ne=h.scrollHeight,Z=w(h),$e=h.scrollLeft,fe=h.scrollTop;h===u?(B=W<ve&&(Z.overflowX==="auto"||Z.overflowX==="scroll"||Z.overflowX==="visible"),oe=b<Ne&&(Z.overflowY==="auto"||Z.overflowY==="scroll"||Z.overflowY==="visible")):(B=W<ve&&(Z.overflowX==="auto"||Z.overflowX==="scroll"),oe=b<Ne&&(Z.overflowY==="auto"||Z.overflowY==="scroll"));var Re=B&&(Math.abs(D-a)<=r&&$e+W<ve)-(Math.abs(j-a)<=r&&!!$e),ie=oe&&(Math.abs(x-l)<=r&&fe+b<Ne)-(Math.abs(y-l)<=r&&!!fe);if(!$[c])for(var be=0;be<=c;be++)$[be]||($[be]={});($[c].vx!=Re||$[c].vy!=ie||$[c].el!==h)&&($[c].el=h,$[c].vx=Re,$[c].vy=ie,clearInterval($[c].pid),(Re!=0||ie!=0)&&(i=!0,$[c].pid=setInterval(function(){n&&this.layer===0&&E.active._onTouchMove(dt);var Fe=$[this.layer].vy?$[this.layer].vy*s:0,pe=$[this.layer].vx?$[this.layer].vx*s:0;typeof d=="function"&&d.call(E.dragged.parentNode[J],pe,Fe,t,dt,$[this.layer].el)!=="continue"||wn($[this.layer].el,pe,Fe)}.bind({layer:c}),24))),c++}while(e.bubbleScroll&&_!==u&&(_=he(_,!1)));At=i}},30),xn=function(e){var o=e.originalEvent,n=e.putSortable,a=e.dragEl,l=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(o){var i=n||l;s();var d=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,c=document.elementFromPoint(d.clientX,d.clientY);u(),i&&!i.el.contains(c)&&(r("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Ft(){}Ft.prototype={startIndex:null,dragStart:function(e){var o=e.oldDraggableIndex;this.startIndex=o},onSpill:function(e){var o=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Me(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(o,a):this.sortable.el.appendChild(o),this.sortable.animateAll(),n&&n.animateAll()},drop:xn};ce(Ft,{pluginName:"revertOnSpill"});function Gt(){}Gt.prototype={onSpill:function(e){var o=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),a.animateAll()},drop:xn};ce(Gt,{pluginName:"removeOnSpill"});E.mount(new Ca);E.mount(Gt,Ft);const Ta={sort:!0,delay:0,delayOnTouchOnly:!1,touchStartThreshold:0,disabled:!1,store:null,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",preventOnFilter:!0,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:1,direction:"horizontal",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,dragoverBubble:!1,removeCloneOnHide:!0,emptyInsertThreshold:5};function Oa(t){t.parentNode&&t.parentNode.removeChild(t)}function xa(t){return/^[a-z][a-z0-9]*$/.test(t)}const an=Symbol("dragData"),In=["setData","chooseData","onChoose","onUnchoose","onStart","onEnd","onAdd","onUpdate","onSort","onRemove","onFilter","onMove","onClone","onChange"],Ia=In.reduce((t,e)=>(t[e]=Function,t),{});function ka({props:t,emit:e}){const o=X(),{modelValue:n}=rt(t),a=X();function l(){f(a)&&f(a).destroy();const r=zn()?.vnode.el,s={onAdd(i){const{pullMode:d,newIndex:c}=i;if(d){const _=se(f(n)),h=i.item[an];_.splice(c,0,h),Oa(i.item),e("update:modelValue",_,h)}},onRemove(i){const{pullMode:d}=i;if(d===!0){const c=se(f(n));c.splice(i.oldIndex,1),e("update:modelValue",c)}},onEnd(i){const{pullMode:d,oldIndex:c,newIndex:_}=i;if(!d){const h=se(f(n)),p=h.splice(c,1);h.splice(_,0,...p),e("update:modelValue",h,h[_])}}},u=In.filter(i=>t[i]).reduce((i,d)=>(i[d]=t[d],i),{});a.value=new E(r,{...Ta,...t.config,...s,...u,onChoose(i){let c=se(f(n))[i.oldIndex];u.chooseData&&(c=u.chooseData(c,i.oldIndex)),i.item[an]=c}})}return[o,{init:l,sortableInstance:a}]}const kn=N({name:"LDraggable",props:{modelValue:{type:Array,required:!0,default:()=>[]},tag:{type:String,required:!1,default:"div"},config:{type:Object,required:!1,default:void 0},...Ia},emits:["update:modelValue"],setup(t,{slots:e,emit:o,attrs:n,expose:a}){const{tag:l}=t,r=xa(l);let s=l;r||(s=U(l));const[u,{init:i,sortableInstance:d}]=ka({props:t,emit:o});return sn(()=>{i()}),a({getInstance:()=>f(d)}),()=>{const{modelValue:c}=t;let _=r?e.empty?.():()=>e.empty?.();return c.length&&(_=r?e.default?.():()=>e.default?.()),G(s,{...n,ref:u},_)}}}),Aa={class:"components-title"},Pa=N({name:"LeftPanel",inheritAttrs:!0}),Ma=N({...Pa,setup(t){const e=X([]);sn(async()=>{e.value=await co()});const o=({icon:n})=>{const a=se(fo(n));return a.__uuid__=pn(),a.__vModel__=mn(`${n}-`),a.__layout__.span=24,a};return(n,a)=>{const l=U("svg-icon");return C(!0),I(R,null,q(f(e),(r,s)=>(C(),I("section",{key:s,class:"components-panel"},[M("div",Aa,[m(l,{class:"svg-icon-r",name:"component"}),M("span",null,Ot(r.title),1)]),m(f(kn),{modelValue:r.list,"onUpdate:modelValue":u=>r.list=u,class:"components-draggable",config:{group:{name:f(fn),pull:"clone",put:!1,revertClone:!0},sort:!1},"choose-data":o},{default:v(()=>[(C(!0),I(R,null,q(r.list,u=>(C(),I("div",{key:u.__uuid__,class:"lc-draggable"},[m(l,{name:u.icon},null,8,["name"]),M("span",null,Ot(u.text),1)]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","config"])]))),128)}}});const Na=De(Ma,[["__scopeId","data-v-59a717f8"]]),$a=t=>(ft("data-v-0814cb49"),t=t(),pt(),t),Ra={class:"widget-box"},Fa={style:{padding:"0 18px"}},Ga=$a(()=>M("span",null,"添加规则",-1)),Ua=N({name:"WidgetRegExp",inheritAttrs:!0}),Wa=N({...Ua,props:{value:{default:()=>[]},model:{},conf:{}},emits:["update:value"],setup(t,{emit:e}){const o=t,n=ne({get(){return o.value},set(r){e("update:value",r)}}),a=()=>{n.value.push({message:void 0,pattern:void 0})},l=r=>{n.value.splice(r,1)};return(r,s)=>{const u=Se,i=Ae,d=Bn,c=mt,_=_t;return C(),I("section",Ra,[M("div",Fa,[m(i,{text:"",type:"info",onClick:a},{icon:v(()=>[m(u,{component:f(Mt)},null,8,["component"])]),default:v(()=>[Ga]),_:1})]),(C(!0),I(R,null,q(f(n),(h,p)=>(C(),I("div",{key:p,class:"rule-item"},[m(i,{class:"rule-delete",text:"",onClick:()=>l(p)},{default:v(()=>[m(u,{size:"18",component:f(Xn)},null,8,["component"])]),_:2},1032,["onClick"]),m(c,{label:"表达式","label-width":"5em",style:{"--n-feedback-font-size":"12px","--n-feedback-height":"18px","--n-feedback-padding":"1px 2px 2px"}},{default:v(()=>[m(d,{value:h.pattern,"onUpdate:value":y=>h.pattern=y,options:f(Do),filterable:"",tag:"",clearable:"",placeholder:"可输入正则，如：/\\\\d+/"},null,8,["value","onUpdate:value","options"])]),_:2},1024),m(c,{label:"错误提示","label-width":"5em",style:{"--n-feedback-font-size":"12px","--n-feedback-height":"18px","--n-feedback-padding":"1px 2px 2px"}},{default:v(()=>[m(_,{value:h.message,"onUpdate:value":y=>h.message=y,clearable:""},null,8,["value","onUpdate:value"])]),_:2},1024)]))),128))])}}});const ja=De(Wa,[["__scopeId","data-v-0814cb49"]]),An=t=>(ft("data-v-bfdc99e5"),t=t(),pt(),t),za={class:"widget-box"},Xa=An(()=>M("span",{class:"divider-label"},"选项",-1)),Ba={style:{padding:"0 10px"}},Va=An(()=>M("span",null,"添加选项",-1)),La=N({name:"WidgetOptions",inheritAttrs:!0}),Ya=N({...La,props:{value:{default:()=>[]},model:{},conf:{}},emits:["update:value"],setup(t,{emit:e}){const o=t,n=ne({get(){return o.value},set(r){e("update:value",r)}}),a=()=>{n.value.push({label:"",value:""})},l=r=>{n.value.splice(r,1)};return(r,s)=>{const u=un,i=_t,d=Se,c=Ln,_=Yn,h=Ae;return C(),I("section",za,[m(u,{dashed:""},{default:v(()=>[Xa]),_:1}),(C(!0),I(R,null,q(f(n),(p,y)=>(C(),I("div",{key:y,class:"opt-draggable"},[m(_,null,{default:v(()=>[m(i,{value:p.label,"onUpdate:value":x=>p.label=x,placeholder:"选项名"},null,8,["value","onUpdate:value"]),m(i,{value:p.value,"onUpdate:value":x=>p.value=x,placeholder:"选项值"},null,8,["value","onUpdate:value"]),m(c,{checkable:"",size:"large",class:"tag-draggable",onClick:x=>l(y)},{default:v(()=>[m(d,{size:"18",component:f(Vn),class:"btn-error"},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),M("div",Ba,[m(h,{text:"",type:"info",onClick:a},{icon:v(()=>[m(d,{component:f(Mt)},null,8,["component"])]),default:v(()=>[Va]),_:1})])])}}});const Ha=De(Ya,[["__scopeId","data-v-bfdc99e5"]]),Pn=t=>(ft("data-v-00455164"),t=t(),pt(),t),qa={class:"widget-box"},Za=Pn(()=>M("span",{class:"divider-label"},"选项",-1)),Ka={style:{padding:"0 10px"}},Qa=Pn(()=>M("span",null,"添加选项",-1)),Ja=N({name:"WidgetTreeOptions",inheritAttrs:!0}),el=N({...Ja,props:{value:{default:()=>[]},model:{},conf:{}},emits:["update:value"],setup(t,{emit:e}){const o=t,n=ne({get(){return o.value},set(h){e("update:value",h)}}),a=X(!1),l=X({}),r=X({label:"",value:""}),s=(h,p)=>{l.value=p},u=()=>{l.value={},r.value={label:"",value:""}},i={trigger:["input","blur"],message:"内容不能为空",validator({field:h,message:p}){if(r.value[h],!r.value[h])return new Error(p)}},d=()=>{const{label:h,value:p}=f(r);return!h||!p?(window.$message.error("选项配置不能为空"),!1):f(l)?(f(l).children?f(l).children.push({label:h,value:p}):f(l).children=[{label:h,value:p}],!0):(n.value.push({children:void 0,label:h,value:p}),!0)},c=({option:h})=>G(Zn,{},()=>[G(Ae,{title:"添加",text:!0,onClick(p){p.stopPropagation(),_(h)}},()=>G(Se,{component:Hn})),G(Ae,{title:"删除",text:!0,onClick(p){p.stopPropagation(),po(f(n),h)}},()=>G(Se,{component:qn}))]),_=h=>{a.value=!0,l.value=h};return(h,p)=>{const y=un,x=Kn,j=Qn,D=mt,W=_t,b=rn;return C(),I(R,null,[M("section",qa,[m(y,{dashed:""},{default:v(()=>[Za]),_:1}),m(x,{data:f(n),"block-line":"","key-field":"value","expand-on-click":"","render-suffix":c},null,8,["data"]),M("div",Ka,[m(f(Ae),{text:"",type:"info",onClick:p[0]||(p[0]=()=>_())},{icon:v(()=>[m(f(Se),{component:f(Mt)},null,8,["component"])]),default:v(()=>[Qa]),_:1})])]),m(b,{show:f(a),"onUpdate:show":p[3]||(p[3]=B=>ke(a)?a.value=B:null),"mask-closable":!1,"on-after-leave":u,size:"small",preset:"dialog",title:"添加选项",style:{width:"580px"},"positive-text":"确认",onPositiveClick:d},{default:v(()=>[m(D,{label:"上级选项","label-placement":"left","label-width":"6em"},{default:v(()=>[m(j,{"block-line":"","default-value":f(l)?.value,options:f(n),"on-update:value":s,"default-expand-all":"","key-field":"value"},null,8,["default-value","options"])]),_:1}),m(D,{label:"选项名","label-placement":"left","label-width":"6em",path:"label",rule:i},{default:v(()=>[m(W,{value:f(r).label,"onUpdate:value":p[1]||(p[1]=B=>f(r).label=B)},null,8,["value"])]),_:1}),m(D,{label:"选项值","label-placement":"left","label-width":"6em",path:"value",rule:i},{default:v(()=>[m(W,{value:f(r).value,"onUpdate:value":p[2]||(p[2]=B=>f(r).value=B)},null,8,["value"])]),_:1})]),_:1},8,["show"])],64)}}});const tl=De(el,[["__scopeId","data-v-00455164"]]),nl=N({name:"WidgetItem",inheritAttrs:!0}),Tt=N({...nl,props:{model:{},conf:{}},setup(t){const e=t,o=l=>{const{model:r}=e;return l.includes(".")?l.split(".").reduce((i,d)=>i?.[d],r):r?.[l]},n=(l,r)=>{const s=a(r),{model:u}=rt(e);if(l.includes(".")){const i=l.split("."),[d,...c]=i.reverse(),_=c.reverse().reduce((h,p)=>h[p],u.value);_[d]=s}else u&&u.value&&(u.value[l]=s)};function a(l){return["true","false"].includes(l)?JSON.parse(l):l??void 0}return(l,r)=>{const s=mt;return C(),Y(s,{label:l.conf.label,style:{"--n-feedback-font-size":"12px","--n-feedback-height":"18px","--n-feedback-padding":"1px 2px 2px"},"show-label":l.conf.tagType!=="Custom","label-style":l.conf.label.length>5?{fontSize:"12px"}:{},path:l.conf.__vModel__},{default:v(()=>[m(f($t),{value:o(l.conf.__vModel__),conf:l.conf,model:l.model,"onUpdate:value":r[3]||(r[3]=u=>n(l.conf.__vModel__,u))},{WidgetOptions:v(()=>[m(Ha,{value:o(l.conf.__vModel__),conf:e.conf,model:l.model,"onUpdate:value":r[0]||(r[0]=u=>n(l.conf.__vModel__,u))},null,8,["value","conf","model"])]),WidgetTreeOptions:v(()=>[m(tl,{value:o(l.conf.__vModel__),conf:e.conf,model:l.model,"onUpdate:value":r[1]||(r[1]=u=>n(l.conf.__vModel__,u))},null,8,["value","conf","model"])]),WidgetRegExp:v(()=>[m(ja,{value:o(l.conf.__vModel__),conf:l.conf,model:l.model,"onUpdate:value":r[2]||(r[2]=u=>n(l.conf.__vModel__,u))},null,8,["value","conf","model"])]),_:1},8,["value","conf","model"])]),_:1},8,["label","show-label","label-style","path"])}}}),ol=N({name:"WidgetSetting",inheritAttrs:!0}),al=N({...ol,props:{widget:{default:void 0}},setup(t){const e=t,{common:o,rules:n}=Xt,a=X(se(Xt)),l=ne(()=>{const{tagType:s}=e.widget;return f(a)[s].filter(u=>u.hidden?u.hidden(e.widget):!0)}),r=ne(()=>Nt(o));return(s,u)=>{const i=Jn,d=eo,c=cn;return C(),Y(c,{class:"widget-setting",model:e.widget,"label-width":"5.5rem","label-placement":"left",rules:f(r)},{default:v(()=>[m(d,{"default-expanded-names":"extendConfig"},{default:v(()=>[m(i,{title:"基础属性",name:"commonConfig"},{default:v(()=>[(C(!0),I(R,null,q(f(o),_=>(C(),Y(Tt,{key:_.label,conf:_,model:e.widget},null,8,["conf","model"]))),128))]),_:1}),m(i,{title:"高级属性",name:"extendConfig"},{default:v(()=>[(C(!0),I(R,null,q(f(l),_=>(C(),Y(Tt,{key:_.label,conf:_,model:e.widget},null,8,["conf","model"]))),128))]),_:1}),m(i,{id:"elTeleport",title:"校验规则",name:"rulesConfig"},{default:v(()=>[(C(!0),I(R,null,q(f(n),_=>(C(),Y(Tt,{key:_.label,conf:_,model:e.widget},null,8,["conf","model"]))),128))]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ll={class:"right-tab"},rl={class:"right-content"},il=N({name:"RightPanel",inheritAttrs:!0}),sl=N({...il,props:{designer:{default:void 0},form:{},widget:{default:void 0}},setup(t){const e=t,o={widget:"组件属性",form:"表单属性"},n=X("widget"),{form:a,widget:l}=rt(e),r=Eo.map(u=>({label:u,value:u})),s=ne({get(){return e.form.fromGrid.xGap},set(u){const{fromGrid:i}=rt(e.form);i.value.xGap=i.value.yGap=u}});return(u,i)=>{const d=to,c=no,_=dn,h=_t,p=mt,y=oo,x=ao,j=mo,D=lo,W=Pt;return C(),I(R,null,[M("div",ll,[m(c,{value:f(n),"onUpdate:value":i[0]||(i[0]=b=>ke(n)?n.value=b:null),"justify-content":"space-evenly",type:"line"},{default:v(()=>[(C(),I(R,null,q(o,(b,B)=>m(d,{key:B,name:B},{default:v(()=>[me(Ot(b),1)]),_:2},1032,["name"])),64))]),_:1},8,["value"])]),m(W,{class:"app-panel"},{default:v(()=>[M("div",rl,[f(n)==="widget"?(C(),I(R,{key:0},[f(l)?(C(),Y(al,{key:f(l).__uuid__,widget:f(l),"onUpdate:widget":i[1]||(i[1]=b=>ke(l)?l.value=b:null)},null,8,["widget"])):(C(),Y(_,{key:1,size:"huge",description:"未选择控件"}))],64)):jt("",!0),f(n)==="form"?(C(),I(R,{key:1},[m(p,{label:"表单名称","label-placement":"left"},{default:v(()=>[m(h,{value:f(a).name,"onUpdate:value":i[2]||(i[2]=b=>f(a).name=b)},null,8,["value"])]),_:1}),m(p,{label:"表单尺寸","label-placement":"left"},{default:v(()=>[m(x,{value:f(a).fromGlobal.size,"onUpdate:value":i[3]||(i[3]=b=>f(a).fromGlobal.size=b),name:"radiobuttongroup1"},{default:v(()=>[(C(!0),I(R,null,q(f(bo),b=>(C(),Y(y,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),m(p,{label:"标签位置","label-placement":"left"},{default:v(()=>[m(x,{value:f(a).fromGlobal.labelPlacement,"onUpdate:value":i[4]||(i[4]=b=>f(a).fromGlobal.labelPlacement=b),name:"radiobuttongroup1"},{default:v(()=>[(C(!0),I(R,null,q(f(yo),b=>(C(),Y(y,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),m(p,{label:"标签对齐","label-placement":"left"},{default:v(()=>[m(x,{value:f(a).fromGlobal.labelAlign,"onUpdate:value":i[5]||(i[5]=b=>f(a).fromGlobal.labelAlign=b),name:"radiobuttongroup1"},{default:v(()=>[(C(!0),I(R,null,q(f(wo),b=>(C(),Y(y,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),m(p,{label:"标签宽度","label-placement":"left"},{default:v(()=>[m(j,{value:f(a).fromGlobal.labelWidth,"onUpdate:value":i[6]||(i[6]=b=>f(a).fromGlobal.labelWidth=b),options:f(r)},null,8,["value","options"])]),_:1}),m(p,{label:"栅格间隔","label-placement":"left"},{default:v(()=>[m(D,{value:f(s),"onUpdate:value":i[7]||(i[7]=b=>ke(s)?s.value=b:null),"button-placement":"both",precision:0,step:"1",max:"999"},null,8,["value"])]),_:1}),m(p,{label:"星号位置","label-placement":"left"},{default:v(()=>[m(x,{value:f(a).fromGlobal.requireMarkPlacement,"onUpdate:value":i[8]||(i[8]=b=>f(a).fromGlobal.requireMarkPlacement=b),name:"radiobuttongroup1"},{default:v(()=>[(C(!0),I(R,null,q(f(So),b=>(C(),Y(y,{key:b.value,value:b.value,label:b.label},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1})],64)):jt("",!0)])]),_:1})],64)}}});const ul=De(sl,[["__scopeId","data-v-55b87999"]]),cl=()=>{const t=X(),e=X({}),o=X(),n=X({name:"naiveui 表单",fromGrid:ho,fromGlobal:vo,items:[]}),a=new go(50),l={undo(){const r=a.go(-1);f(n).items=r},redo(){const r=a.go(1);f(n).items=r},preview(r){r(!0)},empty(){f(n).items.length&&(o.value=void 0,f(n).items=[],l.storage())},save(){console.log("widgets-Config",e.value,f(n))},getConf(){return f(n)},getActiveWidget(){return o},setActiveWidget(r){o.value=r},copyWidget(r){const s={...se(r),__uuid__:pn(),__vModel__:mn(r.tag)};o.value=s,f(n).items.push(s),l.storage()},deleteWidget(r){f(o)===f(n).items[r]&&(o.value=f(n).items[0]),f(n).items.splice(r,1),l.storage()},storage(){a.push(f(n).items)}};return[l,{formData:e,formConfig:n,elFormRef:t,activeWidget:o}]},dl=t=>(ft("data-v-4398884c"),t=t(),pt(),t),fl={class:"app-left"},pl=dl(()=>M("div",{class:"left-logo"},"表单设计器",-1)),ml={class:"app-center"},_l={class:"form-tool"},gl=["onClick"],hl=["onClick"],vl={class:"app-right"},bl=N({name:"PageEditor",inheritAttrs:!0}),yl=N({...bl,setup(t){const e={group:{name:Bt,pull:!0,put:[fn,Bt]}},[o,{formData:n,formConfig:a,elFormRef:l,activeWidget:r}]=cl(),s=ne(()=>{const{items:i}=f(a);return Nt(i)}),u=(i,d)=>{f(a).items=i,o.setActiveWidget(d),o.storage()};return _o.$on("slider:range",({__vModel__:i,__config__:d})=>{n.value[i]=d.defaultValue}),(i,d)=>{const c=Pt,_=Se,h=io,p=dn,y=so,x=cn,j=uo;return C(),Y(j,{class:"app-container",tag:"section"},{default:v(()=>[M("div",fl,[pl,m(c,{class:"app-panel left-panel"},{default:v(()=>[m(Na)]),_:1})]),M("div",ml,[m(Jo,{designer:f(o)},null,8,["designer"]),m(c,{class:"app-panel"},{default:v(()=>[m(x,Ie({ref_key:"elFormRef",ref:l},f(a).fromGlobal,{model:f(n),rules:f(s)}),{default:v(()=>[m(f(kn),Ie(f(a).fromGrid,{"model-value":f(a).items,config:e,tag:"NGrid",class:"center-editor","onUpdate:modelValue":u}),{empty:v(()=>[m(y,{span:24,class:"center-empty",draggable:"false"},{default:v(()=>[m(p,{size:"huge",description:"从左侧选择控件进行表单设计"})]),_:1})]),default:v(()=>[(C(!0),I(R,null,q(f(a).items,(D,W)=>(C(),Y(h,Ie({key:D.__uuid__},D.__layout__,{label:D.label,"show-feedback":!1,path:D.__vModel__,class:["center-row",{on:f(r)?.__uuid__===D.__uuid__}],onClick:b=>f(o).setActiveWidget(D)}),{default:v(()=>[m(f($t),{value:f(n)[D.__vModel__],"onUpdate:value":b=>f(n)[D.__vModel__]=b,conf:D},null,8,["value","onUpdate:value","conf"]),M("div",_l,[M("span",{class:"form-tool-btn icon-copy",onClick:zt(b=>f(o).copyWidget(D),["stop"])},[m(_,{size:"16",component:f(ro)},null,8,["component"])],8,gl),M("span",{class:"form-tool-btn icon-delete",onClick:zt(b=>f(o).deleteWidget(W),["stop"])},[m(_,{size:"16",component:f(ln)},null,8,["component"])],8,hl)])]),_:2},1040,["label","path","class","onClick"]))),128))]),_:1},16,["model-value"])]),_:1},16,["model","rules"])]),_:1})]),M("div",vl,[m(ul,{designer:f(o),widget:f(r),form:f(a)},null,8,["designer","widget","form"])])]),_:1})}}});const Dl=De(yl,[["__scopeId","data-v-4398884c"]]);export{Dl as default};
